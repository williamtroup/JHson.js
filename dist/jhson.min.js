/*! JHson.js v0.8.0 | (c) Bunoon 2024 | MIT License */
(function(){function F(c,b,a){var d={},h=c.children.length,k=0;if(b.includeAttributes){var l=c.attributes.length;"textarea"===c.nodeName.toLowerCase()&&v(c.value)&&(d[m.text]=c.value);for(var e=0;e<l;e++){var g=c.attributes[e];w(g.nodeName)&&b.ignoreAttributes.indexOf(g.nodeName)===u.notFound&&(d[m.attribute+g.nodeName]=g.nodeValue)}}if(b.includeCssProperties&&z.getComputedStyle)for(l=y.defaultView.getComputedStyle(c),e=l.length,g=0;g<e;g++){var f=l[g];if(b.ignoreCssProperties.indexOf(f)===u.notFound){var r=
m.cssStyle+f;f=l.getPropertyValue(f);a.hasOwnProperty(r)&&a[r]===f||(d[r]=f,a[r]=d[r])}}if(b.includeChildren&&0<h)for(k=0,d[m.children]=[],l=0;l<h;l++){e=F;g=c.children[l];r=void 0;f=a;var n={};for(r in f)f.hasOwnProperty(r)&&(n[r]=f[r]);e=e(g,b,n);g=!1;p.formattingNodeTypes.indexOf(e.nodeName)>u.notFound?k++:b.ignoreNodeTypes.indexOf(e.nodeName)===u.notFound&&(g=!0,k++);g&&(g={},g[e.nodeName]=e.nodeValues,d[m.children].push(g))}b.includeText&&(b=k,w(c.innerText)&&(0<b&&v(d[m.children])&&0===d[m.children].length?
d[m.text]=c.innerHTML:c.innerText.trim()===c.innerHTML.trim()&&(d[m.text]=c.innerText)));v(d[m.children])&&0===d[m.children].length&&delete d[m.children];return{nodeName:c.nodeName.toLowerCase(),nodeValues:d}}function L(c,b){for(var a in c.templateData)c.templateData.hasOwnProperty(a)&&b.templateDataKeys.push(a);b.templateDataKeys=b.templateDataKeys.sort(function(d,h){return h.length-d.length});b.templateDataKeysLength=b.templateDataKeys.length}function G(c,b,a,d){var h=[];for(n in b)if(H(n,m.attribute)){if(a.addAttributes){var k=
n.replace(m.attribute,t.empty);c.setAttribute(k,b[n])}}else if(H(n,m.cssStyle))a.addCssProperties&&(k=n.replace(m.cssStyle,t.empty),a.addCssToHead?h.push(k+":"+b[n]+";"):c.style[k]=b[n]);else if(n===m.text){if(a.addText){k=c;var l=a,e=d;k.innerHTML=b[n];if(0<e.templateDataKeysLength)for(var g=0;g<e.templateDataKeysLength;g++){var f=e.templateDataKeys[g];l.templateData.hasOwnProperty(f)&&k.innerHTML.indexOf(f)>u.notFound&&(k.innerHTML=k.innerHTML.replace(new RegExp(f,"g"),l.templateData[f]),e.templateDataKeysProcessed.indexOf(f)===
u.notFound&&e.templateDataKeysProcessed.push(f))}}}else if(n===m.children&&a.addChildren)for(k=b[n].length,l=0;l<k;l++){e=b[n][l];for(var r in e)e.hasOwnProperty(r)&&(g=I(c,r.toLowerCase()),G(g,e[r],a,d))}if(0<h.length){if(w(c.className))b=c.className.split(t.space),b=c.nodeName.toLowerCase()+"."+b[0]+" {";else{if(!w(c.id)){b=[];for(a=0;32>a;a++){8!==a&&12!==a&&16!==a&&20!==a||b.push(t.dash);var n=C.floor(16*C.random()).toString(16);b.push(n)}b=b.join(t.empty);c.id=b}b="#"+c.id+" {"}a=[];a.push(b);
a=a.concat(h);a.push("}");d.css[c.id]=a}}function J(c){var b=[];if(w(c))for(var a=0,d=0;a>u.notFound;)if(a=c.indexOf("{{",d),a>u.notFound&&(d=c.indexOf("}}",a),d>u.notFound)){var h=c.substring(a,d+2);b.push(h);d+=2}return b}function I(c,b){var a=b.toLowerCase(),d="text"===a;D.hasOwnProperty(a)||(D[a]=d?y.createTextNode(t.empty):y.createElement(a));a=D[a].cloneNode(!1);c.appendChild(a);return a}function v(c){return null!==c&&void 0!==c&&c!==t.empty}function x(c){return v(c)&&"object"===typeof c}function w(c){return v(c)&&
"string"===typeof c}function M(c){return v(c)&&"function"===typeof c}function H(c,b){return c.substring(0,b.length).toLowerCase()===b.toLowerCase()}function q(c,b){return v(c)&&"boolean"===typeof c?c:b}function E(c,b){return w(c)?c:b}function A(c,b){if(w(c))c=c.split(t.space),0===c.length&&(c=b);else{var a=c;c=x(a)&&a instanceof Array?a:b}return c}function N(c){var b=!0,a=null;try{w(c)&&(a=B.parse(c))}catch(d){try{a=eval("("+c+")"),M(a)&&(a=a())}catch(h){p.safeMode||(console.error(p.objectErrorText.replace("{{error_1}}",
d.message).replace("{{error_2}}",h.message)),b=!1),a=null}}return{parsed:b,result:a}}function K(c){p=x(c)?c:{};p.safeMode=q(p.safeMode,!0);p.formattingNodeTypes=A(p.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "));p.variableWarningText=E(p.variableWarningText,"Template variable {{variable_name}} not found.");p.objectErrorText=E(p.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}")}var O=this,y=null,z=null,B=null,C=null,p={},D={},t={empty:"",space:" ",newLine:"\n"},
m={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},u={notFound:-1};this.json=function(){var c=null;(function(){c=this;var b={includeAttributes:!0,includeCssProperties:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0,indentSpaces:2,ignoreNodeTypes:[],ignoreCssProperties:[],ignoreAttributes:[]};c.includeAttributes=function(a){b.includeAttributes=q(a,b.includeAttributes);return this};c.includeCssProperties=function(a){b.includeCssProperties=q(a,b.includeCssProperties);return this};
c.includeText=function(a){b.includeText=q(a,b.includeText);return this};c.includeChildren=function(a){b.includeChildren=q(a,b.includeChildren);return this};c.friendlyFormat=function(a){b.friendlyFormat=q(a,b.friendlyFormat);return this};c.indentSpaces=function(a){var d=b.indentSpaces;var h=v(a)&&"number"===typeof a;b.indentSpaces=h?a:d;return this};c.ignoreNodeTypes=function(a){b.ignoreNodeTypes=A(a,b.ignoreNodeTypes);return this};c.ignoreCssProperties=function(a){b.ignoreCssProperties=A(a,b.ignoreCssProperties);
return this};c.ignoreAttributes=function(a){b.ignoreAttributes=A(a,b.ignoreAttributes);return this};c.get=function(a){var d=t.empty;x(a)&&(d={},a=F(a,b,{}),d[a.nodeName]=a.nodeValues,d=b.friendlyFormat?B.stringify(d,null,b.indentSpaces):B.stringify(d));return d};c.getVariables=function(a){return J(a)}})();return c};this.html=function(){var c=null;(function(){c=this;var b={json:t.empty,templateData:{},removeOriginalAttributes:!0,clearOriginalHTML:!0,addCssToHead:!1,clearCssFromHead:!1,logTemplateDataWarnings:!1,
addAttributes:!0,addCssProperties:!0,addText:!0,addChildren:!0};c.json=function(a){b.json=E(a,b.json);return this};c.templateData=function(a){var d=b.templateData;a=x(a)?a:d;b.templateData=a;return this};c.removeOriginalAttributes=function(a){b.removeOriginalAttributes=q(a,b.removeOriginalAttributes);return this};c.clearOriginalHTML=function(a){b.clearOriginalHTML=q(a,b.clearOriginalHTML);return this};c.addCssToHead=function(a){b.addCssToHead=q(a,b.addCssToHead);return this};c.clearCssFromHead=function(a){b.clearCssFromHead=
q(a,b.clearCssFromHead);return this};c.logTemplateDataWarnings=function(a){b.logTemplateDataWarnings=q(a,b.logTemplateDataWarnings);return this};c.addAttributes=function(a){b.addAttributes=q(a,b.addAttributes);return this};c.addCssProperties=function(a){b.addCssProperties=q(a,b.addCssProperties);return this};c.addText=function(a){b.addText=q(a,b.addText);return this};c.addChildren=function(a){b.addChildren=q(a,b.addChildren);return this};c.write=function(a){var d={css:{},templateDataKeys:[],templateDataKeysLength:0,
templateDataKeysProcessed:[]};if(x(a)&&w(b.json)){var h=N(b.json);if(b.clearCssFromHead)for(var k=[].slice.call(y.getElementsByTagName("styles")),l=k.length,e=0;e<l;e++)k[e].parentNode.removeChild(k[e]);x(b.templateData)&&L(b,d);if(h.parsed&&x(h.result))for(var g in h.result)if(g===a.nodeName.toLowerCase()){if(b.removeOriginalAttributes)for(;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);b.clearOriginalHTML&&(a.innerHTML=t.empty);G(a,h.result[g],b,d)}if(b.addCssToHead){h=y.getElementsByTagName("head")[0];
a=[];for(var f in d.css)d.css.hasOwnProperty(f)&&(a=a.concat(d.css[f]));f=I(h,"style");f.type="text/css";f.appendChild(y.createTextNode(a.join(t.newLine)))}if(b.logTemplateDataWarnings&&d.templateDataKeysLength>d.templateDataKeysProcessed.length)for(f=0;f<d.templateDataKeysLength;f++)a=d.templateDataKeys[f],d.templateDataKeysProcessed.indexOf(a)===u.notFound&&console.warn(p.variableWarningText.replace("{{variable_name}}",a))}return O};c.getVariables=function(a){var d=[];x(a)&&(d=J(a.innerHTML));return d}})();
return c};this.setConfiguration=function(c){var b=!1,a;for(a in c)c.hasOwnProperty(a)&&p.hasOwnProperty(a)&&c[a]!==p[a]&&(p[a]=c[a],b=!0);b&&K(p);return this};this.getVersion=function(){return"0.8.0"};(function(c,b,a,d){y=c;z=b;B=a;C=d;K();v(z.$jhson)||(z.$jhson=this)})(document,window,JSON,Math)})();