/*! JHson.js v0.9.0 | (c) Bunoon 2024 | MIT License */
(function(){function F(c,b,a){var d={},l=c.children.length,k=0;if(b.includeAttributes){var g=c.attributes.length,h=[];b.includeText&&"textarea"===c.nodeName.toLowerCase()&&u(c.value)&&(d[m.text]=c.value);for(var f=0;f<g;f++){var e=c.attributes[f];v(e.nodeName)&&b.ignoreAttributes.indexOf(e.nodeName)===r.notFound&&(d[m.attribute+e.nodeName]=e.nodeValue,h.push(e.nodeName))}b.generateUniqueMissingIds&&h.indexOf("id")===r.notFound&&b.ignoreAttributes.indexOf("id")===r.notFound&&(d[m.attribute+"id"]=G())}if(b.includeCssProperties&&
z.getComputedStyle)for(g=x.defaultView.getComputedStyle(c),h=g.length,f=0;f<h;f++){var n=g[f];b.ignoreCssProperties.indexOf(n)===r.notFound&&(e=m.cssStyle+n,n=g.getPropertyValue(n),a.hasOwnProperty(e)&&a[e]===n||(d[e]=n,a[e]=d[e]))}if(b.includeChildren&&0<l)for(k=0,d[m.children]=[],g=0;g<l;g++){h=F;f=c.children[g];e=void 0;n=a;var y={};for(e in n)n.hasOwnProperty(e)&&(y[e]=n[e]);h=h(f,b,y);f=!1;p.formattingNodeTypes.indexOf(h.nodeName)>r.notFound?k++:b.ignoreNodeTypes.indexOf(h.nodeName)===r.notFound&&
(f=!0,k++);f&&(f={},f[h.nodeName]=h.nodeValues,d[m.children].push(f))}b.includeText&&(b=k,v(c.innerText)&&(0<b&&u(d[m.children])&&0===d[m.children].length?d[m.text]=c.innerHTML:c.innerText.trim()===c.innerHTML.trim()&&(d[m.text]=c.innerText)));u(d[m.children])&&0===d[m.children].length&&delete d[m.children];return{nodeName:c.nodeName.toLowerCase(),nodeValues:d}}function M(c,b){for(var a in c.templateData)c.templateData.hasOwnProperty(a)&&b.templateDataKeys.push(a);b.templateDataKeys=b.templateDataKeys.sort(function(d,
l){return l.length-d.length});b.templateDataKeysLength=b.templateDataKeys.length}function H(c,b,a,d){var l=[],k;for(k in b)if(I(k,m.attribute)){if(a.addAttributes){var g=k.replace(m.attribute,t.empty);c.setAttribute(g,b[k])}}else if(I(k,m.cssStyle))a.addCssProperties&&(g=k.replace(m.cssStyle,t.empty),a.addCssToHead?l.push(g+":"+b[k]+";"):c.style[g]=b[k]);else if(k===m.text){if(a.addText){g=c;var h=a,f=d;g.innerHTML=b[k];if(0<f.templateDataKeysLength)for(var e=0;e<f.templateDataKeysLength;e++){var n=
f.templateDataKeys[e];h.templateData.hasOwnProperty(n)&&g.innerHTML.indexOf(n)>r.notFound&&(g.innerHTML=g.innerHTML.replace(new RegExp(n,"g"),h.templateData[n]),f.templateDataKeysProcessed.indexOf(n)===r.notFound&&f.templateDataKeysProcessed.push(n))}}}else if(k===m.children&&a.addChildren)for(g=b[k].length,h=0;h<g;h++){f=b[k][h];for(var y in f)f.hasOwnProperty(y)&&(e=J(c,y.toLowerCase()),H(e,f[y],a,d))}0<l.length&&(v(c.className)?(b=c.className.split(t.space),b=c.nodeName.toLowerCase()+"."+b[0]+
" {"):(v(c.id)||(c.id=G()),b="#"+c.id+" {"),a=[],a.push(b),a=a.concat(l),a.push("}"),d.css[c.id]=a)}function K(c){var b=[];if(v(c))for(var a=0,d=0;a>r.notFound;)if(a=c.indexOf("{{",d),a>r.notFound&&(d=c.indexOf("}}",a),d>r.notFound)){var l=c.substring(a,d+2);b.push(l);d+=2}return b}function J(c,b){var a=b.toLowerCase(),d="text"===a;C.hasOwnProperty(a)||(C[a]=d?x.createTextNode(t.empty):x.createElement(a));a=C[a].cloneNode(!1);c.appendChild(a);return a}function u(c){return null!==c&&void 0!==c&&c!==
t.empty}function w(c){return u(c)&&"object"===typeof c}function v(c){return u(c)&&"string"===typeof c}function N(c){return u(c)&&"function"===typeof c}function G(){for(var c=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||c.push(t.dash);var a=D.floor(16*D.random()).toString(16);c.push(a)}return c.join(t.empty)}function I(c,b){return c.substring(0,b.length).toLowerCase()===b.toLowerCase()}function q(c,b){return u(c)&&"boolean"===typeof c?c:b}function E(c,b){return v(c)?c:b}function A(c,b){if(v(c))c=
c.split(t.space),0===c.length&&(c=b);else{var a=c;c=w(a)&&a instanceof Array?a:b}return c}function O(c){var b=!0,a=null;try{v(c)&&(a=B.parse(c))}catch(d){try{a=eval("("+c+")"),N(a)&&(a=a())}catch(l){p.safeMode||(console.error(p.objectErrorText.replace("{{error_1}}",d.message).replace("{{error_2}}",l.message)),b=!1),a=null}}return{parsed:b,result:a}}function L(c){p=w(c)?c:{};p.safeMode=q(p.safeMode,!0);p.formattingNodeTypes=A(p.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "));
p.variableWarningText=E(p.variableWarningText,"Template variable {{variable_name}} not found.");p.objectErrorText=E(p.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}")}var P=this,x=null,z=null,B=null,D=null,p={},C={},t={empty:"",space:" ",newLine:"\n"},m={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},r={notFound:-1};this.json=function(){var c=null;(function(){c=this;var b={includeAttributes:!0,includeCssProperties:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0,
indentSpaces:2,ignoreNodeTypes:[],ignoreCssProperties:[],ignoreAttributes:[],generateUniqueMissingIds:!1};c.includeAttributes=function(a){b.includeAttributes=q(a,b.includeAttributes);return this};c.includeCssProperties=function(a){b.includeCssProperties=q(a,b.includeCssProperties);return this};c.includeText=function(a){b.includeText=q(a,b.includeText);return this};c.includeChildren=function(a){b.includeChildren=q(a,b.includeChildren);return this};c.friendlyFormat=function(a){b.friendlyFormat=q(a,
b.friendlyFormat);return this};c.indentSpaces=function(a){var d=b.indentSpaces;var l=u(a)&&"number"===typeof a;b.indentSpaces=l?a:d;return this};c.ignoreNodeTypes=function(a){b.ignoreNodeTypes=A(a,b.ignoreNodeTypes);return this};c.ignoreCssProperties=function(a){b.ignoreCssProperties=A(a,b.ignoreCssProperties);return this};c.ignoreAttributes=function(a){b.ignoreAttributes=A(a,b.ignoreAttributes);return this};c.generateUniqueMissingIds=function(a){b.generateUniqueMissingIds=q(a,b.generateUniqueMissingIds);
return this};c.get=function(a){var d=t.empty;w(a)&&(d={},a=F(a,b,{}),d[a.nodeName]=a.nodeValues,d=b.friendlyFormat?B.stringify(d,null,b.indentSpaces):B.stringify(d));return d};c.getVariables=function(a){return K(a)}})();return c};this.html=function(){var c=null;(function(){c=this;var b={json:t.empty,templateData:{},removeOriginalAttributes:!0,clearOriginalHTML:!0,addCssToHead:!1,clearCssFromHead:!1,logTemplateDataWarnings:!1,addAttributes:!0,addCssProperties:!0,addText:!0,addChildren:!0};c.json=function(a){b.json=
E(a,b.json);return this};c.templateData=function(a){var d=b.templateData;a=w(a)?a:d;b.templateData=a;return this};c.removeOriginalAttributes=function(a){b.removeOriginalAttributes=q(a,b.removeOriginalAttributes);return this};c.clearOriginalHTML=function(a){b.clearOriginalHTML=q(a,b.clearOriginalHTML);return this};c.addCssToHead=function(a){b.addCssToHead=q(a,b.addCssToHead);return this};c.clearCssFromHead=function(a){b.clearCssFromHead=q(a,b.clearCssFromHead);return this};c.logTemplateDataWarnings=
function(a){b.logTemplateDataWarnings=q(a,b.logTemplateDataWarnings);return this};c.addAttributes=function(a){b.addAttributes=q(a,b.addAttributes);return this};c.addCssProperties=function(a){b.addCssProperties=q(a,b.addCssProperties);return this};c.addText=function(a){b.addText=q(a,b.addText);return this};c.addChildren=function(a){b.addChildren=q(a,b.addChildren);return this};c.write=function(a){var d={css:{},templateDataKeys:[],templateDataKeysLength:0,templateDataKeysProcessed:[]};if(w(a)&&v(b.json)){var l=
O(b.json);if(b.clearCssFromHead)for(var k=[].slice.call(x.getElementsByTagName("styles")),g=k.length,h=0;h<g;h++)k[h].parentNode.removeChild(k[h]);w(b.templateData)&&M(b,d);if(l.parsed&&w(l.result))for(var f in l.result)if(f===a.nodeName.toLowerCase()){if(b.removeOriginalAttributes)for(;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);b.clearOriginalHTML&&(a.innerHTML=t.empty);H(a,l.result[f],b,d)}if(b.addCssToHead){l=x.getElementsByTagName("head")[0];a=[];for(var e in d.css)d.css.hasOwnProperty(e)&&
(a=a.concat(d.css[e]));e=J(l,"style");e.type="text/css";e.appendChild(x.createTextNode(a.join(t.newLine)))}if(b.logTemplateDataWarnings&&d.templateDataKeysLength>d.templateDataKeysProcessed.length)for(e=0;e<d.templateDataKeysLength;e++)a=d.templateDataKeys[e],d.templateDataKeysProcessed.indexOf(a)===r.notFound&&console.warn(p.variableWarningText.replace("{{variable_name}}",a))}return P};c.getVariables=function(a){var d=[];w(a)&&(d=K(a.innerHTML));return d}})();return c};this.setConfiguration=function(c){var b=
!1,a;for(a in c)c.hasOwnProperty(a)&&p.hasOwnProperty(a)&&c[a]!==p[a]&&(p[a]=c[a],b=!0);b&&L(p);return this};this.getVersion=function(){return"0.9.0"};(function(c,b,a,d){x=c;z=b;B=a;D=d;L();u(z.$jhson)||(z.$jhson=this)})(document,window,JSON,Math)})();