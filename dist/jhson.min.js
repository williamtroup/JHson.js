/*! JHson.js v0.3.0 | (c) Bunoon 2024 | MIT License */
(function(){function C(a,b,c){var d={},q=a.children.length,g=0;if(b.includeAttributes){var f=a.attributes.length;"textarea"===a.nodeName.toLowerCase()&&r(a.value)&&(d[l.text]=a.value);for(var e=0;e<f;e++){var h=a.attributes[e];v(h.nodeName)&&(d[l.attribute+h.nodeName]=h.nodeValue)}}if(b.includeCssStyles&&w.getComputedStyle)for(f=x.defaultView.getComputedStyle(a),e=f.length,h=0;h<e;h++){var m=f[h];if(k.cssPropertiesToIgnore.indexOf(m)===z.notFound){var n=l.cssStyle+m;m=f.getPropertyValue(m);c.hasOwnProperty(n)&&
c[n]===m||(d[n]=m,c[n]=d[n])}}if(b.includeChildren&&0<q)for(g=0,d[l.children]=[],f=0;f<q;f++){e=C;h=a.children[f];n=void 0;m=c;var p={};for(n in m)m.hasOwnProperty(n)&&(p[n]=m[n]);e=e(h,b,p);h=!1;k.formattingNodeTypes.indexOf(e.nodeName.toLowerCase())>z.notFound?g++:k.nodeTypesToIgnore.indexOf(e.nodeName.toLowerCase())===z.notFound&&(h=!0,g++);h&&(h={},h[e.nodeName]=e.nodeValues,d[l.children].push(h))}b.includeText&&(b=g,v(a.innerText)&&(0<b&&r(d[l.children])&&0===d[l.children].length?d[l.text]=a.innerHTML:
a.innerText===a.innerHTML&&(d[l.text]=a.innerText)));r(d[l.children])&&0===d[l.children].length&&delete d[l.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:d}}function G(a,b){var c=H(b.json),d=[];if(u(b.templateData)){for(var q in b.templateData)b.templateData.hasOwnProperty(q)&&d.push(q);d=d.sort(function(f,e){return e.length-f.length})}if(c.parsed&&u(c.result))for(var g in c.result)if(g===a.nodeName.toLowerCase()){if(b.removeAttributes)for(;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);
b.clearHTML&&(a.innerHTML=t.empty);D(a,c.result[g],d,b.templateData)}return I}function D(a,b,c,d){var q=c.length,g;for(g in b)if(E(g,l.attribute)){var f=g.replace(l.attribute,t.empty);a.setAttribute(f,b[g])}else if(E(g,l.cssStyle))f=g.replace(l.cssStyle,t.empty),a.style[f]=b[g];else if(g===l.text){if(a.innerHTML=b[g],0<q)for(f=0;f<q;f++){var e=c[f];d.hasOwnProperty(e)&&(a.innerHTML=a.innerHTML.replace(new RegExp(e,"g"),d[e]))}}else if(g===l.children)for(f=b[g].length,e=0;e<f;e++){var h=b[g][e],m;
for(m in h)if(h.hasOwnProperty(m)){var n=a,p=m.toLowerCase().toLowerCase(),J="text"===p;A.hasOwnProperty(p)||(A[p]=J?x.createTextNode(t.empty):x.createElement(p));p=A[p].cloneNode(!1);n.appendChild(p);D(p,h[m],c,d)}}}function r(a){return null!==a&&void 0!==a&&a!==t.empty}function u(a){return r(a)&&"object"===typeof a}function v(a){return r(a)&&"string"===typeof a}function K(a){return r(a)&&"function"===typeof a}function E(a,b){return a.substring(0,b.length).toLowerCase()===b.toLowerCase()}function B(a,
b){if(v(a))a=a.split(t.space),0===a.length&&(a=b);else{var c=a;a=u(c)&&c instanceof Array?c:b}return a}function H(a){var b=!0,c=null;try{v(a)&&(c=y.parse(a))}catch(d){try{c=eval("("+a+")"),K(c)&&(c=c())}catch(q){k.safeMode||(console.error("Errors in object: "+d.message+", "+q.message),b=!1),c=null}}return{parsed:b,result:c}}function F(a){a=k=u(a)?a:{};var b=k.safeMode;var c=r(b)&&"boolean"===typeof b;a.safeMode=c?b:!0;k.nodeTypesToIgnore=B(k.nodeTypesToIgnore,[]);k.cssPropertiesToIgnore=B(k.cssPropertiesToIgnore,
[]);a=k;b=k.jsonIndentationSpaces;c=r(b)&&"number"===typeof b;a.jsonIndentationSpaces=c?b:2;k.formattingNodeTypes=B(k.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "))}var I=this,x=null,w=null,y=null,k={},A={},t={empty:"",space:" "},l={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},z={notFound:-1};this.json=function(){var a=null;(function(){a=this;var b={includeAttributes:!1,includeCssStyles:!1,includeText:!1,includeChildren:!1,friendlyFormat:!1};this.includeAttributes=
function(){b.includeAttributes=!0;return this};this.includeCssStyles=function(){b.includeCssStyles=!0;return this};this.includeText=function(){b.includeText=!0;return this};this.includeChildren=function(){b.includeChildren=!0;return this};this.friendlyFormat=function(){b.friendlyFormat=!0;return this};this.get=function(c){var d={};c=C(c,b,{});d[c.nodeName]=c.nodeValues;return b.friendlyFormat?y.stringify(d,null,k.jsonIndentationSpaces):y.stringify(d)}})();return a};this.html=function(){var a=null;
(function(){a=this;var b={json:t.empty,templateData:{},removeAttributes:!1,clearHTML:!1};this.json=function(c){b.json=c;return this};this.templateData=function(c){var d={};c=u(c)?c:d;b.templateData=c;return this};this.removeAttributes=function(){b.removeAttributes=!0;return this};this.clearHTML=function(){b.clearHTML=!0;return this};this.write=function(c){return G(c,b)}})();return a};this.setConfiguration=function(a){var b=!1,c;for(c in a)a.hasOwnProperty(c)&&k.hasOwnProperty(c)&&a[c]!==k[c]&&(k[c]=
a[c],b=!0);b&&F(k);return this};this.getVersion=function(){return"0.3.0"};(function(a,b,c){x=a;w=b;y=c;F();r(w.$jhson)||(w.$jhson=this)})(document,window,JSON)})();