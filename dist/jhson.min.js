/*! JHson.js v1.0.0 | (c) Bunoon 2024 | MIT License */
(function(){function F(a,c,b){var d={},l=a.children.length,k=0;if(c.includeAttributes){var g=a.attributes.length,h=[];c.includeText&&"textarea"===a.nodeName.toLowerCase()&&u(a.value)&&(d[m.text]=a.value);for(var f=0;f<g;f++){var e=a.attributes[f];v(e.nodeName)&&c.ignoreAttributes.indexOf(e.nodeName)===r.notFound&&(d[m.attribute+e.nodeName]=e.nodeValue,h.push(e.nodeName))}c.generateUniqueMissingIds&&h.indexOf("id")===r.notFound&&c.ignoreAttributes.indexOf("id")===r.notFound&&(d[m.attribute+"id"]=G())}if(c.includeCssProperties&&
z.getComputedStyle)for(g=x.defaultView.getComputedStyle(a),h=g.length,f=0;f<h;f++){var n=g[f];c.ignoreCssProperties.indexOf(n)===r.notFound&&(e=m.cssStyle+n,n=g.getPropertyValue(n),b.hasOwnProperty(e)&&b[e]===n||(d[e]=n,b[e]=d[e]))}if(c.includeChildren&&0<l)for(k=0,d[m.children]=[],g=0;g<l;g++){h=F;f=a.children[g];e=void 0;n=b;var y={};for(e in n)n.hasOwnProperty(e)&&(y[e]=n[e]);h=h(f,c,y);f=!1;p.formattingNodeTypes.indexOf(h.nodeName)>r.notFound?k++:c.ignoreNodeTypes.indexOf(h.nodeName)===r.notFound&&
(f=!0,k++);f&&(f={},f[h.nodeName]=h.nodeValues,d[m.children].push(f))}c.includeText&&(c=k,v(a.innerText)&&(0<c&&u(d[m.children])&&0===d[m.children].length?d[m.text]=a.innerHTML:a.innerText.trim()===a.innerHTML.trim()&&(d[m.text]=a.innerText)));u(d[m.children])&&0===d[m.children].length&&delete d[m.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:d}}function M(a,c){for(var b in a.templateData)a.templateData.hasOwnProperty(b)&&c.templateDataKeys.push(b);c.templateDataKeys=c.templateDataKeys.sort(function(d,
l){return l.length-d.length});c.templateDataKeysLength=c.templateDataKeys.length}function H(a,c,b,d){var l=[],k;for(k in c)if(I(k,m.attribute)){if(b.addAttributes){var g=k.replace(m.attribute,t.empty);a.setAttribute(g,c[k])}}else if(I(k,m.cssStyle))b.addCssProperties&&(g=k.replace(m.cssStyle,t.empty),b.addCssToHead?l.push(g+":"+c[k]+";"):a.style[g]=c[k]);else if(k===m.text){if(b.addText){g=a;var h=b,f=d;g.innerHTML=c[k];if(0<f.templateDataKeysLength)for(var e=0;e<f.templateDataKeysLength;e++){var n=
f.templateDataKeys[e];h.templateData.hasOwnProperty(n)&&g.innerHTML.indexOf(n)>r.notFound&&(g.innerHTML=g.innerHTML.replace(new RegExp(n,"g"),h.templateData[n]),f.templateDataKeysProcessed.indexOf(n)===r.notFound&&f.templateDataKeysProcessed.push(n))}}}else if(k===m.children&&b.addChildren)for(g=c[k].length,h=0;h<g;h++){f=c[k][h];for(var y in f)f.hasOwnProperty(y)&&(e=J(a,y.toLowerCase()),H(e,f[y],b,d))}0<l.length&&(v(a.className)?(c=a.className.split(t.space),c=a.nodeName.toLowerCase()+"."+c[0]+
" {"):(v(a.id)||(a.id=G()),c="#"+a.id+" {"),b=[],b.push(c),b=b.concat(l),b.push("}"),d.css[a.id]=b)}function K(a){var c=[];if(v(a))for(var b=0,d=0;b>r.notFound;)if(b=a.indexOf("{{",d),b>r.notFound&&(d=a.indexOf("}}",b),d>r.notFound)){var l=a.substring(b,d+2);c.push(l);d+=2}return c}function J(a,c){var b=c.toLowerCase(),d="text"===b;C.hasOwnProperty(b)||(C[b]=d?x.createTextNode(t.empty):x.createElement(b));b=C[b].cloneNode(!1);a.appendChild(b);return b}function u(a){return null!==a&&void 0!==a&&a!==
t.empty}function w(a){return u(a)&&"object"===typeof a}function v(a){return u(a)&&"string"===typeof a}function N(a){return u(a)&&"function"===typeof a}function G(){for(var a=[],c=0;32>c;c++){8!==c&&12!==c&&16!==c&&20!==c||a.push(t.dash);var b=D.floor(16*D.random()).toString(16);a.push(b)}return a.join(t.empty)}function I(a,c){return a.substring(0,c.length).toLowerCase()===c.toLowerCase()}function q(a,c){return u(a)&&"boolean"===typeof a?a:c}function E(a,c){return v(a)?a:c}function A(a,c){if(v(a))a=
a.split(t.space),0===a.length&&(a=c);else{var b=a;a=w(b)&&b instanceof Array?b:c}return a}function O(a){var c=!0,b=null;try{v(a)&&(b=B.parse(a))}catch(d){try{b=eval("("+a+")"),N(b)&&(b=b())}catch(l){p.safeMode||(console.error(p.objectErrorText.replace("{{error_1}}",d.message).replace("{{error_2}}",l.message)),c=!1),b=null}}return{parsed:c,result:b}}function L(a){p=w(a)?a:{};p.safeMode=q(p.safeMode,!0);p.formattingNodeTypes=A(p.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "));
p.variableWarningText=E(p.variableWarningText,"Template variable {{variable_name}} not found.");p.objectErrorText=E(p.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}")}var P=this,x=null,z=null,B=null,D=null,p={},C={},t={empty:"",space:" ",newLine:"\n"},m={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},r={notFound:-1};this.json=function(){var a=null;(function(){a=this;var c={includeAttributes:!0,includeCssProperties:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0,
indentSpaces:2,ignoreNodeTypes:[],ignoreCssProperties:[],ignoreAttributes:[],generateUniqueMissingIds:!1};a.includeAttributes=function(b){c.includeAttributes=q(b,c.includeAttributes);return a};a.includeCssProperties=function(b){c.includeCssProperties=q(b,c.includeCssProperties);return a};a.includeText=function(b){c.includeText=q(b,c.includeText);return a};a.includeChildren=function(b){c.includeChildren=q(b,c.includeChildren);return a};a.friendlyFormat=function(b){c.friendlyFormat=q(b,c.friendlyFormat);
return a};a.indentSpaces=function(b){var d=c.indentSpaces;var l=u(b)&&"number"===typeof b;c.indentSpaces=l?b:d;return a};a.ignoreNodeTypes=function(b){c.ignoreNodeTypes=A(b,c.ignoreNodeTypes);return a};a.ignoreCssProperties=function(b){c.ignoreCssProperties=A(b,c.ignoreCssProperties);return a};a.ignoreAttributes=function(b){c.ignoreAttributes=A(b,c.ignoreAttributes);return a};a.generateUniqueMissingIds=function(b){c.generateUniqueMissingIds=q(b,c.generateUniqueMissingIds);return a};a.get=function(b){var d=
t.empty;w(b)&&(d={},b=F(b,c,{}),d[b.nodeName]=b.nodeValues,d=c.friendlyFormat?B.stringify(d,null,c.indentSpaces):B.stringify(d));return d};a.getVariables=function(b){return K(b)}})();return a};this.html=function(){var a=null;(function(){a=this;var c={json:t.empty,templateData:{},removeOriginalAttributes:!0,clearOriginalHTML:!0,addCssToHead:!1,clearCssFromHead:!1,logTemplateDataWarnings:!1,addAttributes:!0,addCssProperties:!0,addText:!0,addChildren:!0};a.json=function(b){c.json=E(b,c.json);return a};
a.templateData=function(b){var d=c.templateData;b=w(b)?b:d;c.templateData=b;return a};a.removeOriginalAttributes=function(b){c.removeOriginalAttributes=q(b,c.removeOriginalAttributes);return a};a.clearOriginalHTML=function(b){c.clearOriginalHTML=q(b,c.clearOriginalHTML);return a};a.addCssToHead=function(b){c.addCssToHead=q(b,c.addCssToHead);return a};a.clearCssFromHead=function(b){c.clearCssFromHead=q(b,c.clearCssFromHead);return a};a.logTemplateDataWarnings=function(b){c.logTemplateDataWarnings=
q(b,c.logTemplateDataWarnings);return a};a.addAttributes=function(b){c.addAttributes=q(b,c.addAttributes);return a};a.addCssProperties=function(b){c.addCssProperties=q(b,c.addCssProperties);return a};a.addText=function(b){c.addText=q(b,c.addText);return a};a.addChildren=function(b){c.addChildren=q(b,c.addChildren);return a};a.write=function(b){var d={css:{},templateDataKeys:[],templateDataKeysLength:0,templateDataKeysProcessed:[]};if(w(b)&&v(c.json)){var l=O(c.json);if(c.clearCssFromHead)for(var k=
[].slice.call(x.getElementsByTagName("styles")),g=k.length,h=0;h<g;h++)k[h].parentNode.removeChild(k[h]);w(c.templateData)&&M(c,d);if(l.parsed&&w(l.result))for(var f in l.result)if(f===b.nodeName.toLowerCase()){if(c.removeOriginalAttributes)for(;0<b.attributes.length;)b.removeAttribute(b.attributes[0].name);c.clearOriginalHTML&&(b.innerHTML=t.empty);H(b,l.result[f],c,d)}if(c.addCssToHead){l=x.getElementsByTagName("head")[0];b=[];for(var e in d.css)d.css.hasOwnProperty(e)&&(b=b.concat(d.css[e]));e=
J(l,"style");e.type="text/css";e.appendChild(x.createTextNode(b.join(t.newLine)))}if(c.logTemplateDataWarnings&&d.templateDataKeysLength>d.templateDataKeysProcessed.length)for(e=0;e<d.templateDataKeysLength;e++)b=d.templateDataKeys[e],d.templateDataKeysProcessed.indexOf(b)===r.notFound&&console.warn(p.variableWarningText.replace("{{variable_name}}",b))}return P};a.getVariables=function(b){var d=[];w(b)&&(d=K(b.innerHTML));return d}})();return a};this.setConfiguration=function(a){var c=!1,b;for(b in a)a.hasOwnProperty(b)&&
p.hasOwnProperty(b)&&a[b]!==p[b]&&(p[b]=a[b],c=!0);c&&L(p);return this};this.getVersion=function(){return"1.0.0"};(function(a,c,b,d){x=a;z=c;B=b;D=d;L();u(z.$jhson)||(z.$jhson=this)})(document,window,JSON,Math)})();