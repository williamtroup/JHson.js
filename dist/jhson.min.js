/*! JHson.js v0.3.0 | (c) Bunoon 2024 | MIT License */
(function(){function D(a,c,b){var d={},q=a.children.length,g=0;if(c.includeAttributes){var f=a.attributes.length;"textarea"===a.nodeName.toLowerCase()&&r(a.value)&&(d[l.text]=a.value);for(var e=0;e<f;e++){var k=a.attributes[e];w(k.nodeName)&&(d[l.attribute+k.nodeName]=k.nodeValue)}}if(c.includeCssStyles&&x.getComputedStyle)for(f=y.defaultView.getComputedStyle(a),e=f.length,k=0;k<e;k++){var m=f[k];if(h.cssPropertiesToIgnore.indexOf(m)===A.notFound){var n=l.cssStyle+m;m=f.getPropertyValue(m);b.hasOwnProperty(n)&&
b[n]===m||(d[n]=m,b[n]=d[n])}}if(c.includeChildren&&0<q)for(g=0,d[l.children]=[],f=0;f<q;f++){e=D;k=a.children[f];n=void 0;m=b;var p={};for(n in m)m.hasOwnProperty(n)&&(p[n]=m[n]);e=e(k,c,p);k=!1;h.formattingNodeTypes.indexOf(e.nodeName.toLowerCase())>A.notFound?g++:h.nodeTypesToIgnore.indexOf(e.nodeName.toLowerCase())===A.notFound&&(k=!0,g++);k&&(k={},k[e.nodeName]=e.nodeValues,d[l.children].push(k))}c.includeText&&(c=g,w(a.innerText)&&(0<c&&r(d[l.children])&&0===d[l.children].length?d[l.text]=a.innerHTML:
a.innerText===a.innerHTML&&(d[l.text]=a.innerText)));r(d[l.children])&&0===d[l.children].length&&delete d[l.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:d}}function H(a,c){var b=I(c.json),d=[];if(v(c.templateData)){for(var q in c.templateData)c.templateData.hasOwnProperty(q)&&d.push(q);d=d.sort(function(f,e){return e.length-f.length})}if(b.parsed&&v(b.result))for(var g in b.result)if(g===a.nodeName.toLowerCase()){if(c.removeAttributes)for(;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);
c.clearHTML&&(a.innerHTML=u.empty);E(a,b.result[g],d,c.templateData)}return J}function E(a,c,b,d){var q=b.length,g;for(g in c)if(F(g,l.attribute)){var f=g.replace(l.attribute,u.empty);a.setAttribute(f,c[g])}else if(F(g,l.cssStyle))f=g.replace(l.cssStyle,u.empty),a.style[f]=c[g];else if(g===l.text){if(a.innerHTML=c[g],0<q)for(f=0;f<q;f++){var e=b[f];d.hasOwnProperty(e)&&(a.innerHTML=a.innerHTML.replace(new RegExp(e,"g"),d[e]))}}else if(g===l.children)for(f=c[g].length,e=0;e<f;e++){var k=c[g][e],m;
for(m in k)if(k.hasOwnProperty(m)){var n=a,p=m.toLowerCase().toLowerCase(),K="text"===p;B.hasOwnProperty(p)||(B[p]=K?y.createTextNode(u.empty):y.createElement(p));p=B[p].cloneNode(!1);n.appendChild(p);E(p,k[m],b,d)}}}function r(a){return null!==a&&void 0!==a&&a!==u.empty}function v(a){return r(a)&&"object"===typeof a}function w(a){return r(a)&&"string"===typeof a}function L(a){return r(a)&&"function"===typeof a}function F(a,c){return a.substring(0,c.length).toLowerCase()===c.toLowerCase()}function t(a,
c){return r(a)&&"boolean"===typeof a?a:c}function C(a,c){if(w(a))a=a.split(u.space),0===a.length&&(a=c);else{var b=a;a=v(b)&&b instanceof Array?b:c}return a}function I(a){var c=!0,b=null;try{w(a)&&(b=z.parse(a))}catch(d){try{b=eval("("+a+")"),L(b)&&(b=b())}catch(q){h.safeMode||(console.error("Errors in object: "+d.message+", "+q.message),c=!1),b=null}}return{parsed:c,result:b}}function G(a){h=v(a)?a:{};h.safeMode=t(h.safeMode,!0);h.nodeTypesToIgnore=C(h.nodeTypesToIgnore,[]);h.cssPropertiesToIgnore=
C(h.cssPropertiesToIgnore,[]);a=h;var c=h.jsonIndentationSpaces;var b=r(c)&&"number"===typeof c;a.jsonIndentationSpaces=b?c:2;h.formattingNodeTypes=C(h.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "))}var J=this,y=null,x=null,z=null,h={},B={},u={empty:"",space:" "},l={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},A={notFound:-1};this.json=function(){var a=null;(function(){a=this;var c={includeAttributes:!1,includeCssStyles:!1,includeText:!1,includeChildren:!1,
friendlyFormat:!1};this.includeAttributes=function(b){c.includeAttributes=t(b,!1);return this};this.includeCssStyles=function(b){c.includeCssStyles=t(b,!1);return this};this.includeText=function(b){c.includeText=t(b,!1);return this};this.includeChildren=function(b){c.includeChildren=t(b,!1);return this};this.friendlyFormat=function(b){c.friendlyFormat=t(b,!1);return this};this.get=function(b){var d={};b=D(b,c,{});d[b.nodeName]=b.nodeValues;return c.friendlyFormat?z.stringify(d,null,h.jsonIndentationSpaces):
z.stringify(d)}})();return a};this.html=function(){var a=null;(function(){a=this;var c={json:u.empty,templateData:{},removeAttributes:!1,clearHTML:!1};this.json=function(b){c.json=b;return this};this.templateData=function(b){var d={};b=v(b)?b:d;c.templateData=b;return this};this.removeAttributes=function(b){c.removeAttributes=t(b,!1);return this};this.clearHTML=function(b){c.clearHTML=t(b,!1);return this};this.write=function(b){return H(b,c)}})();return a};this.setConfiguration=function(a){var c=
!1,b;for(b in a)a.hasOwnProperty(b)&&h.hasOwnProperty(b)&&a[b]!==h[b]&&(h[b]=a[b],c=!0);c&&G(h);return this};this.getVersion=function(){return"0.3.0"};(function(a,c,b){y=a;x=c;z=b;G();r(x.$jhson)||(x.$jhson=this)})(document,window,JSON)})();