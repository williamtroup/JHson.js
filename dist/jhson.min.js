/*! JHson.js v0.4.0 | (c) Bunoon 2024 | MIT License */
(function(){function E(a,c,b){var d={},n=a.children.length,p=0;if(c.includeAttributes){var e=a.attributes.length;"textarea"===a.nodeName.toLowerCase()&&r(a.value)&&(d[k.text]=a.value);for(var f=0;f<e;f++){var g=a.attributes[f];u(g.nodeName)&&(d[k.attribute+g.nodeName]=g.nodeValue)}}if(c.includeCssStyles&&x.getComputedStyle)for(e=w.defaultView.getComputedStyle(a),f=e.length,g=0;g<f;g++){var m=e[g];if(h.cssPropertiesToIgnore.indexOf(m)===A.notFound){var l=k.cssStyle+m;m=e.getPropertyValue(m);b.hasOwnProperty(l)&&
b[l]===m||(d[l]=m,b[l]=d[l])}}if(c.includeChildren&&0<n)for(p=0,d[k.children]=[],e=0;e<n;e++){f=E;g=a.children[e];l=void 0;m=b;var y={};for(l in m)m.hasOwnProperty(l)&&(y[l]=m[l]);f=f(g,c,y);g=!1;h.formattingNodeTypes.indexOf(f.nodeName.toLowerCase())>A.notFound?p++:h.nodeTypesToIgnore.indexOf(f.nodeName.toLowerCase())===A.notFound&&(g=!0,p++);g&&(g={},g[f.nodeName]=f.nodeValues,d[k.children].push(g))}c.includeText&&(c=p,u(a.innerText)&&(0<c&&r(d[k.children])&&0===d[k.children].length?d[k.text]=a.innerHTML:
a.innerText===a.innerHTML&&(d[k.text]=a.innerText)));r(d[k.children])&&0===d[k.children].length&&delete d[k.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:d}}function J(a,c){if(v(a)&&u(c.json)){var b=K(c.json),d=[];if(v(c.templateData)){for(var n in c.templateData)c.templateData.hasOwnProperty(n)&&d.push(n);d=d.sort(function(e,f){return f.length-e.length})}if(b.parsed&&v(b.result))for(var p in b.result)if(p===a.nodeName.toLowerCase()){if(c.removeAttributes)for(;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);
c.clearHTML&&(a.innerHTML=q.empty);F(a,b.result[p],d,c)}}return L}function F(a,c,b,d){var n=b.length,p=[],e;for(e in c)if(G(e,k.attribute)){var f=e.replace(k.attribute,q.empty);a.setAttribute(f,c[e])}else if(G(e,k.cssStyle))f=e.replace(k.cssStyle,q.empty),d.addCssToHead?p.push(f+":"+c[e]+";"):a.style[f]=c[e];else if(e===k.text){if(a.innerHTML=c[e],0<n)for(f=0;f<n;f++){var g=b[f];d.templateData.hasOwnProperty(g)&&(a.innerHTML=a.innerHTML.replace(new RegExp(g,"g"),d.templateData[g]))}}else if(e===k.children)for(f=
c[e].length,g=0;g<f;g++){var m=c[e][g],l;for(l in m)if(m.hasOwnProperty(l)){var y=H(a,l.toLowerCase());F(y,m[l],b,d)}}if(0<p.length){c=w.getElementsByTagName("head")[0];if(!u(a.id)){b=[];for(d=0;32>d;d++)8!==d&&12!==d&&16!==d&&20!==d||b.push(q.dash),n=B.floor(16*B.random()).toString(16),b.push(n);b=b.join(q.empty);a.id=b}b=[];b.push("#"+a.id+" {");b=b.concat(p);b.push("}");a=H(c,"style");a.type="text/css";a.appendChild(w.createTextNode(b.join(q.newLine)))}}function H(a,c){var b=c.toLowerCase(),d=
"text"===b;C.hasOwnProperty(b)||(C[b]=d?w.createTextNode(q.empty):w.createElement(b));b=C[b].cloneNode(!1);a.appendChild(b);return b}function r(a){return null!==a&&void 0!==a&&a!==q.empty}function v(a){return r(a)&&"object"===typeof a}function u(a){return r(a)&&"string"===typeof a}function M(a){return r(a)&&"function"===typeof a}function G(a,c){return a.substring(0,c.length).toLowerCase()===c.toLowerCase()}function t(a,c){return r(a)&&"boolean"===typeof a?a:c}function D(a,c){if(u(a))a=a.split(q.space),
0===a.length&&(a=c);else{var b=a;a=v(b)&&b instanceof Array?b:c}return a}function K(a){var c=!0,b=null;try{u(a)&&(b=z.parse(a))}catch(d){try{b=eval("("+a+")"),M(b)&&(b=b())}catch(n){h.safeMode||(console.error("Errors in object: "+d.message+", "+n.message),c=!1),b=null}}return{parsed:c,result:b}}function I(a){h=v(a)?a:{};h.safeMode=t(h.safeMode,!0);h.nodeTypesToIgnore=D(h.nodeTypesToIgnore,[]);h.cssPropertiesToIgnore=D(h.cssPropertiesToIgnore,[]);a=h;var c=h.jsonIndentationSpaces;var b=r(c)&&"number"===
typeof c;a.jsonIndentationSpaces=b?c:2;h.formattingNodeTypes=D(h.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "))}var L=this,w=null,x=null,z=null,B=null,h={},C={},q={empty:"",space:" ",newLine:"\n"},k={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},A={notFound:-1};this.json=function(){var a=null;(function(){a=this;var c={includeAttributes:!0,includeCssStyles:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0};a.includeAttributes=function(b){c.includeAttributes=
t(b,c.includeAttributes);return this};a.includeCssStyles=function(b){c.includeCssStyles=t(b,c.includeCssStyles);return this};a.includeText=function(b){c.includeText=t(b,c.includeText);return this};a.includeChildren=function(b){c.includeChildren=t(b,c.includeChildren);return this};a.friendlyFormat=function(b){c.friendlyFormat=t(b,c.friendlyFormat);return this};a.get=function(b){var d=q.empty;v(b)&&(d={},b=E(b,c,{}),d[b.nodeName]=b.nodeValues,d=c.friendlyFormat?z.stringify(d,null,h.jsonIndentationSpaces):
z.stringify(d));return d}})();return a};this.html=function(){var a=null;(function(){a=this;var c={json:q.empty,templateData:{},removeAttributes:!0,clearHTML:!0,addCssToHead:!1};a.json=function(b){var d=c.json;b=u(b)?b:d;c.json=b;return this};a.templateData=function(b){var d=c.templateData;b=v(b)?b:d;c.templateData=b;return this};a.removeAttributes=function(b){c.removeAttributes=t(b,c.removeAttributes);return this};a.clearHTML=function(b){c.clearHTML=t(b,c.clearHTML);return this};a.addCssToHead=function(b){c.addCssToHead=
t(b,c.addCssToHead);return this};a.write=function(b){return J(b,c)}})();return a};this.setConfiguration=function(a){var c=!1,b;for(b in a)a.hasOwnProperty(b)&&h.hasOwnProperty(b)&&a[b]!==h[b]&&(h[b]=a[b],c=!0);c&&I(h);return this};this.getVersion=function(){return"0.4.0"};(function(a,c,b,d){w=a;x=c;z=b;B=d;I();r(x.$jhson)||(x.$jhson=this)})(document,window,JSON,Math)})();