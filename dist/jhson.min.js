/*! JHson.js v1.0.0 | (c) Bunoon 2024 | MIT License */
(function(){function G(){for(var a=h.domElementTypes,b=a.length,c=0;c<b;c++){var e=x.getElementsByTagName(a[c]);e=[].slice.call(e);for(var m=e.length,l=0;l<m;l++){var f=e[l],k=!0;if(u(f)&&f.hasAttribute("data-jhson-options")){var d=f.getAttribute("data-jhson-options");if(v(d))if(d=H(d),d.parsed&&w(d.result)){d=d.result;d=w(d)?d:{};d.json=y(d.json,r.empty);var g=d.onBeforeRender;g=B(g)?g:null;d.onBeforeRender=g;g=d.onRenderComplete;g=B(g)?g:null;d.onRenderComplete=g;d.currentView={};d.currentView.element=
f;f=d;I(f.onBeforeRender,f.element);d=J();d.json=f.json;K(f.currentView.element,d);I(f.onRenderComplete,f.element)}else h.safeMode||(console.error(h.attributeNotValidErrorText.replace("{{attribute_name}}","data-jhson-options")),k=!1);else h.safeMode||(console.error(h.attributeNotSetErrorText.replace("{{attribute_name}}","data-jhson-options")),k=!1)}if(!k)break}}}function L(a,b,c){var e={},m=a.children.length,l=0;if(b.includeAttributes){var f=a.attributes.length,k=[];b.includeText&&"textarea"===a.nodeName.toLowerCase()&&
u(a.value)&&(e[n.text]=a.value);for(var d=0;d<f;d++){var g=a.attributes[d];v(g.nodeName)&&b.ignoreAttributes.indexOf(g.nodeName)===t.notFound&&(e[n.attribute+g.nodeName]=g.nodeValue,k.push(g.nodeName))}b.generateUniqueMissingIds&&k.indexOf("id")===t.notFound&&b.ignoreAttributes.indexOf("id")===t.notFound&&(e[n.attribute+"id"]=M())}if(b.includeCssProperties&&C.getComputedStyle)for(f=x.defaultView.getComputedStyle(a),k=f.length,d=0;d<k;d++){var p=f[d];b.ignoreCssProperties.indexOf(p)===t.notFound&&
(g=n.cssStyle+p,p=f.getPropertyValue(p),c.hasOwnProperty(g)&&c[g]===p||(e[g]=p,c[g]=e[g]))}if(b.includeChildren&&0<m)for(l=0,e[n.children]=[],f=0;f<m;f++){k=L;d=a.children[f];g=void 0;p=c;var z={};for(g in p)p.hasOwnProperty(g)&&(z[g]=p[g]);k=k(d,b,z);d=!1;h.formattingNodeTypes.indexOf(k.nodeName)>t.notFound?l++:b.ignoreNodeTypes.indexOf(k.nodeName)===t.notFound&&(d=!0,l++);d&&(d={},d[k.nodeName]=k.nodeValues,e[n.children].push(d))}b.includeText&&(b=l,v(a.innerText)&&(0<b&&u(e[n.children])&&0===e[n.children].length?
e[n.text]=a.innerHTML:a.innerText.trim()===a.innerHTML.trim()&&(e[n.text]=a.innerText)));u(e[n.children])&&0===e[n.children].length&&delete e[n.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:e}}function J(){return{json:r.empty,templateData:{},removeOriginalAttributes:!0,clearOriginalHTML:!0,addCssToHead:!1,clearCssFromHead:!1,logTemplateDataWarnings:!1,addAttributes:!0,addCssProperties:!0,addText:!0,addChildren:!0}}function K(a,b){if(w(a)&&v(b.json)){var c=H(b.json),e={css:{},templateDataKeys:[],
templateDataKeysLength:0,templateDataKeysProcessed:[]};if(b.clearCssFromHead)for(var m=[].slice.call(x.getElementsByTagName("styles")),l=m.length,f=0;f<l;f++)m[f].parentNode.removeChild(m[f]);w(b.templateData)&&S(b,e);if(c.parsed&&w(c.result))for(var k in c.result)if(k===a.nodeName.toLowerCase()){if(b.removeOriginalAttributes)for(;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);b.clearOriginalHTML&&(a.innerHTML=r.empty);N(a,c.result[k],b,e)}if(b.addCssToHead){m=x.getElementsByTagName("head")[0];
c=[];for(var d in e.css)e.css.hasOwnProperty(d)&&(c=c.concat(e.css[d]));d=O(m,"style");d.type="text/css";d.appendChild(x.createTextNode(c.join(r.newLine)))}if(b.logTemplateDataWarnings&&e.templateDataKeysLength>e.templateDataKeysProcessed.length)for(d=0;d<e.templateDataKeysLength;d++)c=e.templateDataKeys[d],e.templateDataKeysProcessed.indexOf(c)===t.notFound&&console.warn(h.variableWarningText.replace("{{variable_name}}",c))}return T}function S(a,b){for(var c in a.templateData)a.templateData.hasOwnProperty(c)&&
b.templateDataKeys.push(c);b.templateDataKeys=b.templateDataKeys.sort(function(e,m){return m.length-e.length});b.templateDataKeysLength=b.templateDataKeys.length}function N(a,b,c,e){var m=[],l;for(l in b)if(P(l,n.attribute)){if(c.addAttributes){var f=l.replace(n.attribute,r.empty);a.setAttribute(f,b[l])}}else if(P(l,n.cssStyle))c.addCssProperties&&(f=l.replace(n.cssStyle,r.empty),c.addCssToHead?m.push(f+":"+b[l]+";"):a.style[f]=b[l]);else if(l===n.text){if(c.addText){f=a;var k=c,d=e;f.innerHTML=b[l];
if(0<d.templateDataKeysLength)for(var g=0;g<d.templateDataKeysLength;g++){var p=d.templateDataKeys[g];k.templateData.hasOwnProperty(p)&&f.innerHTML.indexOf(p)>t.notFound&&(f.innerHTML=f.innerHTML.replace(new RegExp(p,"g"),k.templateData[p]),d.templateDataKeysProcessed.indexOf(p)===t.notFound&&d.templateDataKeysProcessed.push(p))}}}else if(l===n.children&&c.addChildren)for(f=b[l].length,k=0;k<f;k++){d=b[l][k];for(var z in d)d.hasOwnProperty(z)&&(g=O(a,z.toLowerCase()),N(g,d[z],c,e))}0<m.length&&(v(a.className)?
(b=a.className.split(r.space),b=a.nodeName.toLowerCase()+"."+b[0]+" {"):(v(a.id)||(a.id=M()),b="#"+a.id+" {"),c=[],c.push(b),c=c.concat(m),c.push("}"),e.css[a.id]=c)}function Q(a){var b=[];if(v(a))for(var c=0,e=0;c>t.notFound;)if(c=a.indexOf("{{",e),c>t.notFound&&(e=a.indexOf("}}",c),e>t.notFound)){var m=a.substring(c,e+2);b.push(m);e+=2}return b}function I(a){B(a)&&a.apply(null,[].slice.call(arguments,1))}function O(a,b){var c=b.toLowerCase(),e="text"===c;E.hasOwnProperty(c)||(E[c]=e?x.createTextNode(r.empty):
x.createElement(c));c=E[c].cloneNode(!1);a.appendChild(c);return c}function u(a){return null!==a&&void 0!==a&&a!==r.empty}function w(a){return u(a)&&"object"===typeof a}function v(a){return u(a)&&"string"===typeof a}function B(a){return u(a)&&"function"===typeof a}function M(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push(r.dash);var c=F.floor(16*F.random()).toString(16);a.push(c)}return a.join(r.empty)}function P(a,b){return a.substring(0,b.length).toLowerCase()===b.toLowerCase()}
function q(a,b){return u(a)&&"boolean"===typeof a?a:b}function y(a,b){return v(a)?a:b}function A(a,b){if(v(a))a=a.split(r.space),0===a.length&&(a=b);else{var c=a;a=w(c)&&c instanceof Array?c:b}return a}function H(a){var b=!0,c=null;try{v(a)&&(c=D.parse(a))}catch(e){try{c=eval("("+a+")"),B(c)&&(c=c())}catch(m){h.safeMode||(console.error(h.objectErrorText.replace("{{error_1}}",e.message).replace("{{error_2}}",m.message)),b=!1),c=null}}return{parsed:b,result:c}}function R(a){h=w(a)?a:{};h.safeMode=q(h.safeMode,
!0);h.domElementTypes=A(h.domElementTypes,["*"]);h.formattingNodeTypes=A(h.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "));h.variableWarningText=y(h.variableWarningText,"Template variable {{variable_name}} not found.");h.objectErrorText=y(h.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}");h.attributeNotValidErrorText=y(h.attributeNotValidErrorText,"The attribute '{{attribute_name}}' is not a valid object.");h.attributeNotSetErrorText=y(h.attributeNotSetErrorText,
"The attribute '{{attribute_name}}' has not been set correctly.")}var T=this,x=null,C=null,D=null,F=null,h={},E={},r={empty:"",space:" ",newLine:"\n"},n={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},t={notFound:-1};this.renderAll=function(){G();return this};this.json=function(){var a={includeAttributes:!0,includeCssProperties:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0,indentSpaces:2,ignoreNodeTypes:[],ignoreCssProperties:[],ignoreAttributes:[],generateUniqueMissingIds:!1};
return{includeAttributes:function(b){a.includeAttributes=q(b,a.includeAttributes);return this},includeCssProperties:function(b){a.includeCssProperties=q(b,a.includeCssProperties);return this},includeText:function(b){a.includeText=q(b,a.includeText);return this},includeChildren:function(b){a.includeChildren=q(b,a.includeChildren);return this},friendlyFormat:function(b){a.friendlyFormat=q(b,a.friendlyFormat);return this},indentSpaces:function(b){var c=a.indentSpaces;var e=u(b)&&"number"===typeof b;
a.indentSpaces=e?b:c;return this},ignoreNodeTypes:function(b){a.ignoreNodeTypes=A(b,a.ignoreNodeTypes);return this},ignoreCssProperties:function(b){b.ignoreCssProperties=A(b,b.ignoreCssProperties);return this},ignoreAttributes:function(b){a.ignoreAttributes=A(b,a.ignoreAttributes);return this},generateUniqueMissingIds:function(b){a.generateUniqueMissingIds=q(b,a.generateUniqueMissingIds);return this},get:function(b){var c=r.empty;w(b)&&(c={},b=L(b,a,{}),c[b.nodeName]=b.nodeValues,c=a.friendlyFormat?
D.stringify(c,null,a.indentSpaces):D.stringify(c));return c},getVariables:function(b){return Q(b)}}};this.html=function(){var a=J();return{json:function(b){a.json=y(b,a.json);return this},templateData:function(b){var c=a.templateData;b=w(b)?b:c;a.templateData=b;return this},removeOriginalAttributes:function(b){a.removeOriginalAttributes=q(b,a.removeOriginalAttributes);return this},clearOriginalHTML:function(b){a.clearOriginalHTML=q(b,a.clearOriginalHTML);return this},addCssToHead:function(b){a.addCssToHead=
q(b,a.addCssToHead);return this},clearCssFromHead:function(b){a.clearCssFromHead=q(b,a.clearCssFromHead);return this},logTemplateDataWarnings:function(b){a.logTemplateDataWarnings=q(b,a.logTemplateDataWarnings);return this},addAttributes:function(b){a.addAttributes=q(b,a.addAttributes);return this},addCssProperties:function(b){a.addCssProperties=q(b,a.addCssProperties);return this},addText:function(b){a.addText=q(b,a.addText);return this},addChildren:function(b){a.addChildren=q(b,a.addChildren);return this},
write:function(b){return K(b,a)},getVariables:function(b){var c=[];w(b)&&(c=Q(b.innerHTML));return c}}};this.setConfiguration=function(a){var b=!1,c;for(c in a)a.hasOwnProperty(c)&&h.hasOwnProperty(c)&&a[c]!==h[c]&&(h[c]=a[c],b=!0);b&&R(h);return this};this.getVersion=function(){return"1.0.0"};(function(a,b,c,e){x=a;C=b;D=c;F=e;R();x.addEventListener("DOMContentLoaded",function(){G()});u(C.$jhson)||(C.$jhson=this)})(document,window,JSON,Math)})();