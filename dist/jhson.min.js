/*! JHson.js v1.2.0 | (c) Bunoon 2024 | MIT License */
(function(){function L(){for(var a=k.domElementTypes,b=a.length,c=0;c<b;c++){var e=x.getElementsByTagName(a[c]);e=[].slice.call(e);for(var q=e.length,l=0;l<q;l++){var f=e[l],m=!0;if(v(f)&&f.hasAttribute("data-jhson-js")){var d=f.getAttribute("data-jhson-js");if(u(d))if(d=M(d),d.parsed&&w(d.result)){d=F(d.result,{});var g=G();d.json=z(d.json,g.json);d.templateData=F(d.templateData,g.templateData);d.removeOriginalAttributes=p(d.removeOriginalAttributes,g.removeOriginalAttributes);d.clearOriginalHTML=
p(d.clearOriginalHTML,g.clearOriginalHTML);d.addCssToHead=p(d.addCssToHead,g.addCssToHead);d.clearCssFromHead=p(d.clearCssFromHead,g.clearCssFromHead);d.logTemplateDataWarnings=p(d.logTemplateDataWarnings,g.logTemplateDataWarnings);d.addAttributes=p(d.addAttributes,g.addAttributes);d.addCssProperties=p(d.addCssProperties,g.addCssProperties);d.addText=p(d.addText,g.addText);d.addChildren=p(d.addChildren,g.addChildren);g=d.onBeforeRender;g=C(g)?g:null;d.onBeforeRender=g;g=d.onRenderComplete;g=C(g)?
g:null;d.onRenderComplete=g;d.currentView={};d.currentView.element=f;f=d;N(f.onBeforeRender,f.element);d=G();d.json=f.json;O(f.currentView.element,d);N(f.onRenderComplete,f.element)}else k.safeMode||(console.error(k.attributeNotValidErrorText.replace("{{attribute_name}}","data-jhson-js")),m=!1);else k.safeMode||(console.error(k.attributeNotSetErrorText.replace("{{attribute_name}}","data-jhson-js")),m=!1)}if(!m)break}}}function P(a,b,c){var e={},q=a.children.length,l=0;if(b.includeAttributes){var f=
a.attributes.length,m=[];b.includeText&&"textarea"===a.nodeName.toLowerCase()&&v(a.value)&&(e[r.text]=a.value);for(var d=0;d<f;d++){var g=a.attributes[d];u(g.nodeName)&&b.ignoreAttributes.indexOf(g.nodeName)===t.notFound&&(e[r.attribute+g.nodeName]=g.nodeValue,m.push(g.nodeName))}b.generateUniqueMissingIds&&m.indexOf("id")===t.notFound&&b.ignoreAttributes.indexOf("id")===t.notFound&&(e[r.attribute+"id"]=Q())}if(b.includeCssProperties&&D.getComputedStyle)for(f=x.defaultView.getComputedStyle(a),m=f.length,
d=0;d<m;d++){var n=f[d];b.ignoreCssProperties.indexOf(n)===t.notFound&&(g=r.cssStyle+n,n=f.getPropertyValue(n),c.hasOwnProperty(g)&&c[g]===n||(e[g]=n,c[g]=e[g]))}if(b.includeChildren&&0<q)for(l=0,e[r.children]=[],f=0;f<q;f++){m=P;d=a.children[f];g=void 0;n=c;var A={};for(g in n)n.hasOwnProperty(g)&&(A[g]=n[g]);m=m(d,b,A);d=!1;k.formattingNodeTypes.indexOf(m.nodeName)>t.notFound?l++:b.ignoreNodeTypes.indexOf(m.nodeName)===t.notFound&&(d=!0,l++);d&&(d={},d[m.nodeName]=m.nodeValues,e[r.children].push(d))}b.includeText&&
(b=l,u(a.innerText)&&(0<b&&v(e[r.children])&&0===e[r.children].length?e[r.text]=a.innerHTML:a.innerText.trim()===a.innerHTML.trim()&&(e[r.text]=a.innerText)));v(e[r.children])&&0===e[r.children].length&&delete e[r.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:e}}function G(){return{json:h.empty,templateData:{},removeOriginalAttributes:!0,clearOriginalHTML:!0,addCssToHead:!1,clearCssFromHead:!1,logTemplateDataWarnings:!1,addAttributes:!0,addCssProperties:!0,addText:!0,addChildren:!0}}
function O(a,b){if(w(a)&&u(b.json)){var c=M(b.json),e={css:{},templateDataKeys:[],templateDataKeysLength:0,templateDataKeysProcessed:[]};if(c.parsed&&w(c.result)){if(b.clearCssFromHead)for(var q=[].slice.call(x.getElementsByTagName("styles")),l=q.length,f=0;f<l;f++)q[f].parentNode.removeChild(q[f]);w(b.templateData)&&X(b,e);for(var m in c.result)if(m===a.nodeName.toLowerCase()){if(b.removeOriginalAttributes)for(;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);b.clearOriginalHTML&&(a.innerHTML=
h.empty);R(a,c.result[m],b,e)}c=H(a.innerHTML);q=c.length;for(l=0;l<q;l++)f=c[l],f.indexOf(h.variableDefault)>t.notFound&&(m=f.replace(h.variableStart,h.empty).replace(h.variableEnd,h.empty).split(h.variableDefault)[1],u(m)&&(a.innerHTML=a.innerHTML.replace(f,m.trim())));if(b.addCssToHead){c=x.getElementsByTagName("head")[0];a=[];for(var d in e.css)e.css.hasOwnProperty(d)&&(a=a.concat(e.css[d]));d=S(c,"style");d.type="text/css";d.appendChild(x.createTextNode(a.join(h.newLine)))}if(b.logTemplateDataWarnings&&
e.templateDataKeysLength>e.templateDataKeysProcessed.length)for(b=0;b<e.templateDataKeysLength;b++)d=e.templateDataKeys[b],e.templateDataKeysProcessed.indexOf(d)===t.notFound&&console.warn(k.variableWarningText.replace("{{variable_name}}",d))}}return y}function X(a,b){for(var c in a.templateData)a.templateData.hasOwnProperty(c)&&b.templateDataKeys.push(c);b.templateDataKeys=b.templateDataKeys.sort(function(e,q){return q.length-e.length});b.templateDataKeysLength=b.templateDataKeys.length}function R(a,
b,c,e){var q=[],l;for(l in b)if(T(l,r.attribute)){if(c.addAttributes){var f=l.replace(r.attribute,h.empty);a.setAttribute(f,b[l])}}else if(T(l,r.cssStyle))c.addCssProperties&&(f=l.replace(r.cssStyle,h.empty),c.addCssToHead?q.push(f+":"+b[l]+";"):a.style[f]=b[l]);else if(l===r.text){if(c.addText){f=a;var m=c,d=e;f.innerHTML=b[l];if(0<d.templateDataKeysLength)for(var g=0;g<d.templateDataKeysLength;g++){var n=d.templateDataKeys[g];if(m.templateData.hasOwnProperty(n)){var A=m.templateData[n];if(f.innerHTML.indexOf(n)>
t.notFound)f.innerHTML=U(f.innerHTML,n,A),d.templateDataKeysProcessed.indexOf(n)===t.notFound&&d.templateDataKeysProcessed.push(n);else if(n=n.replace(h.variableEnd,h.empty)+h.space+h.variableDefault,n=f.innerHTML.indexOf(n),n>t.notFound){var V=f.innerHTML.indexOf(h.variableEnd,n);V>t.notFound&&(n=f.innerHTML.substring(n,V+h.variableEnd.length),f.innerHTML=U(f.innerHTML,n,A))}}}}}else if(l===r.children&&c.addChildren)for(f=b[l].length,m=0;m<f;m++){d=b[l][m];for(var I in d)d.hasOwnProperty(I)&&(g=
S(a,I.toLowerCase()),R(g,d[I],c,e))}0<q.length&&(u(a.className)?(b=a.className.split(h.space),b=a.nodeName.toLowerCase()+"."+b[0]+" {"):(u(a.id)||(a.id=Q()),b="#"+a.id+" {"),c=[],c.push(b),c=c.concat(q),c.push("}"),e.css[a.id]=c)}function H(a){var b=[];if(u(a))for(var c=0,e=0;c>t.notFound;)if(c=a.indexOf(h.variableStart,e),c>t.notFound&&(e=a.indexOf(h.variableEnd,c),e>t.notFound)){var q=a.substring(c,e+h.variableEnd.length);b.push(q);e+=2}return b}function N(a){C(a)&&a.apply(null,[].slice.call(arguments,
1))}function S(a,b){b=b.toLowerCase();var c="text"===b;J.hasOwnProperty(b)||(J[b]=c?x.createTextNode(h.empty):x.createElement(b));b=J[b].cloneNode(!1);a.appendChild(b);return b}function v(a){return null!==a&&void 0!==a&&a!==h.empty}function w(a){return v(a)&&"object"===typeof a}function u(a){return v(a)&&"string"===typeof a}function C(a){return v(a)&&"function"===typeof a}function Q(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push(h.dash);var c=K.floor(16*K.random()).toString(16);
a.push(c)}return a.join(h.empty)}function T(a,b){return a.substring(0,b.length).toLowerCase()===b.toLowerCase()}function U(a,b,c){return a.replace(new RegExp(b.replace(h.variableDefault,"["+h.variableDefault+"]"),"g"),c)}function p(a,b){return v(a)&&"boolean"===typeof a?a:b}function z(a,b){return u(a)?a:b}function F(a,b){return w(a)?a:b}function B(a,b){u(a)?(a=a.split(h.space),0===a.length&&(a=b)):a=w(a)&&a instanceof Array?a:b;return a}function M(a){var b=!0,c=null;try{u(a)&&(c=E.parse(a))}catch(e){try{c=
eval("("+a+")"),C(c)&&(c=c())}catch(q){k.safeMode||(console.error(k.objectErrorText.replace("{{error_1}}",e.message).replace("{{error_2}}",q.message)),b=!1),c=null}}return{parsed:b,result:c}}function W(a){k=w(a)?a:{};k.safeMode=p(k.safeMode,!0);k.domElementTypes=B(k.domElementTypes,["*"]);k.formattingNodeTypes=B(k.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "));k.variableWarningText=z(k.variableWarningText,"Template variable {{variable_name}} not found.");k.objectErrorText=
z(k.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}");k.attributeNotValidErrorText=z(k.attributeNotValidErrorText,"The attribute '{{attribute_name}}' is not a valid object.");k.attributeNotSetErrorText=z(k.attributeNotSetErrorText,"The attribute '{{attribute_name}}' has not been set correctly.")}var x=null,D=null,E=null,K=null,y={},k={},J={},h={empty:"",space:" ",newLine:"\n",variableStart:"{{",variableEnd:"}}",variableDefault:"|"},r={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},
t={notFound:-1};y.renderAll=function(){L();return y};y.json=function(){var a={includeAttributes:!0,includeCssProperties:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0,indentSpaces:2,ignoreNodeTypes:[],ignoreCssProperties:[],ignoreAttributes:[],generateUniqueMissingIds:!1};return{includeAttributes:function(b){a.includeAttributes=p(b,a.includeAttributes);return this},includeCssProperties:function(b){a.includeCssProperties=p(b,a.includeCssProperties);return this},includeText:function(b){a.includeText=
p(b,a.includeText);return this},includeChildren:function(b){a.includeChildren=p(b,a.includeChildren);return this},friendlyFormat:function(b){a.friendlyFormat=p(b,a.friendlyFormat);return this},indentSpaces:function(b){var c=a.indentSpaces;var e=v(b)&&"number"===typeof b;a.indentSpaces=e?b:c;return this},ignoreNodeTypes:function(b){a.ignoreNodeTypes=B(b,a.ignoreNodeTypes);return this},ignoreCssProperties:function(b){a.ignoreCssProperties=B(b,a.ignoreCssProperties);return this},ignoreAttributes:function(b){a.ignoreAttributes=
B(b,a.ignoreAttributes);return this},generateUniqueMissingIds:function(b){a.generateUniqueMissingIds=p(b,a.generateUniqueMissingIds);return this},get:function(b){var c=h.empty;w(b)&&(c={},b=P(b,a,{}),c[b.nodeName]=b.nodeValues,c=a.friendlyFormat?E.stringify(c,null,a.indentSpaces):E.stringify(c));return c},getVariables:function(b){return H(b)}}};y.html=function(){var a=G();return{json:function(b){a.json=z(b,a.json);return this},templateData:function(b){a.templateData=F(b,a.templateData);return this},
removeOriginalAttributes:function(b){a.removeOriginalAttributes=p(b,a.removeOriginalAttributes);return this},clearOriginalHTML:function(b){a.clearOriginalHTML=p(b,a.clearOriginalHTML);return this},addCssToHead:function(b){a.addCssToHead=p(b,a.addCssToHead);return this},clearCssFromHead:function(b){a.clearCssFromHead=p(b,a.clearCssFromHead);return this},logTemplateDataWarnings:function(b){a.logTemplateDataWarnings=p(b,a.logTemplateDataWarnings);return this},addAttributes:function(b){a.addAttributes=
p(b,a.addAttributes);return this},addCssProperties:function(b){a.addCssProperties=p(b,a.addCssProperties);return this},addText:function(b){a.addText=p(b,a.addText);return this},addChildren:function(b){a.addChildren=p(b,a.addChildren);return this},write:function(b){return O(b,a)},getVariables:function(b){var c=[];w(b)&&(c=H(b.innerHTML));return c}}};y.setConfiguration=function(a){var b=!1;if(w(a)){for(var c in a)a.hasOwnProperty(c)&&k.hasOwnProperty(c)&&a[c]!==k[c]&&(k[c]=a[c],b=!0);b&&W(k)}return y};
y.getVersion=function(){return"1.2.0"};(function(a,b,c,e){x=a;D=b;E=c;K=e;W();x.addEventListener("DOMContentLoaded",function(){L()});v(D.$jhson)||(D.$jhson=y)})(document,window,JSON,Math)})();