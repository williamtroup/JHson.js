/*! JHson.js v0.5.0 | (c) Bunoon 2024 | MIT License */
(function(){function E(a,c,b){var d={},m=a.children.length,q=0;if(c.includeAttributes){var l=a.attributes.length;"textarea"===a.nodeName.toLowerCase()&&t(a.value)&&(d[g.text]=a.value);for(var e=0;e<l;e++){var f=a.attributes[e];u(f.nodeName)&&(d[g.attribute+f.nodeName]=f.nodeValue)}}if(c.includeCssStyles&&y.getComputedStyle)for(l=v.defaultView.getComputedStyle(a),e=l.length,f=0;f<e;f++){var h=l[f];if(k.cssPropertiesToIgnore.indexOf(h)===A.notFound){var n=g.cssStyle+h;h=l.getPropertyValue(h);b.hasOwnProperty(n)&&
b[n]===h||(d[n]=h,b[n]=d[n])}}if(c.includeChildren&&0<m)for(q=0,d[g.children]=[],l=0;l<m;l++){e=E;f=a.children[l];n=void 0;h=b;var w={};for(n in h)h.hasOwnProperty(n)&&(w[n]=h[n]);e=e(f,c,w);f=!1;k.formattingNodeTypes.indexOf(e.nodeName.toLowerCase())>A.notFound?q++:k.nodeTypesToIgnore.indexOf(e.nodeName.toLowerCase())===A.notFound&&(f=!0,q++);f&&(f={},f[e.nodeName]=e.nodeValues,d[g.children].push(f))}c.includeText&&(c=q,u(a.innerText)&&(0<c&&t(d[g.children])&&0===d[g.children].length?d[g.text]=a.innerHTML:
a.innerText===a.innerHTML&&(d[g.text]=a.innerText)));t(d[g.children])&&0===d[g.children].length&&delete d[g.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:d}}function J(a,c){var b={css:{}};if(x(a)&&u(c.json)){var d=K(c.json),m=[];c.clearCssFromHead&&L();if(x(c.templateData)){for(var q in c.templateData)c.templateData.hasOwnProperty(q)&&m.push(q);m=m.sort(function(e,f){return f.length-e.length})}if(d.parsed&&x(d.result))for(var l in d.result)if(l===a.nodeName.toLowerCase()){if(c.removeAttributes)for(;0<
a.attributes.length;)a.removeAttribute(a.attributes[0].name);c.clearHTML&&(a.innerHTML=p.empty);F(a,d.result[l],m,c,b)}c.addCssToHead&&M(b)}return N}function F(a,c,b,d,m){var q=b.length,l=[],e;for(e in c)if(G(e,g.attribute)){var f=e.replace(g.attribute,p.empty);a.setAttribute(f,c[e])}else if(G(e,g.cssStyle))f=e.replace(g.cssStyle,p.empty),d.addCssToHead?l.push(f+":"+c[e]+";"):a.style[f]=c[e];else if(e===g.text){if(a.innerHTML=c[e],0<q)for(f=0;f<q;f++){var h=b[f];d.templateData.hasOwnProperty(h)&&
(a.innerHTML=a.innerHTML.replace(new RegExp(h,"g"),d.templateData[h]))}}else if(e===g.children)for(f=c[e].length,h=0;h<f;h++){var n=c[e][h],w;for(w in n)if(n.hasOwnProperty(w)){var O=H(a,w.toLowerCase());F(O,n[w],b,d,m)}}if(0<l.length){if(!u(a.id)){c=[];for(b=0;32>b;b++)8!==b&&12!==b&&16!==b&&20!==b||c.push(p.dash),d=B.floor(16*B.random()).toString(16),c.push(d);c=c.join(p.empty);a.id=c}c=[];c.push("#"+a.id+" {");c=c.concat(l);c.push("}");m.css[a.id]=c}}function M(a){var c=v.getElementsByTagName("head")[0],
b=[],d;for(d in a.css)a.css.hasOwnProperty(d)&&(b=b.concat(a.css[d]));a=H(c,"style");a.type="text/css";a.appendChild(v.createTextNode(b.join(p.newLine)))}function L(){for(var a=v.getElementsByTagName("style"),c=a.length,b=0;b<c;b++)a[b].parentNode.removeChild(a[b])}function H(a,c){var b=c.toLowerCase(),d="text"===b;C.hasOwnProperty(b)||(C[b]=d?v.createTextNode(p.empty):v.createElement(b));b=C[b].cloneNode(!1);a.appendChild(b);return b}function t(a){return null!==a&&void 0!==a&&a!==p.empty}function x(a){return t(a)&&
"object"===typeof a}function u(a){return t(a)&&"string"===typeof a}function P(a){return t(a)&&"function"===typeof a}function G(a,c){return a.substring(0,c.length).toLowerCase()===c.toLowerCase()}function r(a,c){return t(a)&&"boolean"===typeof a?a:c}function D(a,c){if(u(a))a=a.split(p.space),0===a.length&&(a=c);else{var b=a;a=x(b)&&b instanceof Array?b:c}return a}function K(a){var c=!0,b=null;try{u(a)&&(b=z.parse(a))}catch(d){try{b=eval("("+a+")"),P(b)&&(b=b())}catch(m){k.safeMode||(console.error("Errors in object: "+
d.message+", "+m.message),c=!1),b=null}}return{parsed:c,result:b}}function I(a){k=x(a)?a:{};k.safeMode=r(k.safeMode,!0);k.nodeTypesToIgnore=D(k.nodeTypesToIgnore,[]);k.cssPropertiesToIgnore=D(k.cssPropertiesToIgnore,[]);k.formattingNodeTypes=D(k.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "))}var N=this,v=null,y=null,z=null,B=null,k={},C={},p={empty:"",space:" ",newLine:"\n"},g={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},A={notFound:-1};this.json=function(){var a=
null;(function(){a=this;var c={includeAttributes:!0,includeCssStyles:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0,indentSpaces:2};a.includeAttributes=function(b){c.includeAttributes=r(b,c.includeAttributes);return this};a.includeCssStyles=function(b){c.includeCssStyles=r(b,c.includeCssStyles);return this};a.includeText=function(b){c.includeText=r(b,c.includeText);return this};a.includeChildren=function(b){c.includeChildren=r(b,c.includeChildren);return this};a.friendlyFormat=function(b){c.friendlyFormat=
r(b,c.friendlyFormat);return this};a.indentSpaces=function(b){var d=c.indentSpaces;var m=t(b)&&"number"===typeof b;c.indentSpaces=m?b:d;return this};a.get=function(b){var d=p.empty;x(b)&&(d={},b=E(b,c,{}),d[b.nodeName]=b.nodeValues,d=c.friendlyFormat?z.stringify(d,null,c.indentSpaces):z.stringify(d));return d}})();return a};this.html=function(){var a=null;(function(){a=this;var c={json:p.empty,templateData:{},removeAttributes:!0,clearHTML:!0,addCssToHead:!1,clearCssFromHead:!1};a.json=function(b){var d=
c.json;b=u(b)?b:d;c.json=b;return this};a.templateData=function(b){var d=c.templateData;b=x(b)?b:d;c.templateData=b;return this};a.removeAttributes=function(b){c.removeAttributes=r(b,c.removeAttributes);return this};a.clearHTML=function(b){c.clearHTML=r(b,c.clearHTML);return this};a.addCssToHead=function(b){c.addCssToHead=r(b,c.addCssToHead);return this};a.clearCssFromHead=function(b){c.clearCssFromHead=r(b,c.clearCssFromHead);return this};a.write=function(b){return J(b,c)}})();return a};this.setConfiguration=
function(a){var c=!1,b;for(b in a)a.hasOwnProperty(b)&&k.hasOwnProperty(b)&&a[b]!==k[b]&&(k[b]=a[b],c=!0);c&&I(k);return this};this.getVersion=function(){return"0.5.0"};(function(a,c,b,d){v=a;y=c;z=b;B=d;I();t(y.$jhson)||(y.$jhson=this)})(document,window,JSON,Math)})();