/*! JHson.js v0.6.0 | (c) Bunoon 2024 | MIT License */
(function(){function D(a,c,b){var d={},m=a.children.length,h=0;if(c.includeAttributes){var f=a.attributes.length;"textarea"===a.nodeName.toLowerCase()&&t(a.value)&&(d[k.text]=a.value);for(var l=0;l<f;l++){var g=a.attributes[l];u(g.nodeName)&&c.ignoreAttributes.indexOf(g.nodeName)===v.notFound&&(d[k.attribute+g.nodeName]=g.nodeValue)}}if(c.includeCssProperties&&y.getComputedStyle)for(f=w.defaultView.getComputedStyle(a),l=f.length,g=0;g<l;g++){var n=f[g];if(c.ignoreCssProperties.indexOf(n)===v.notFound){var e=
k.cssStyle+n;n=f.getPropertyValue(n);b.hasOwnProperty(e)&&b[e]===n||(d[e]=n,b[e]=d[e])}}if(c.includeChildren&&0<m)for(h=0,d[k.children]=[],f=0;f<m;f++){l=D;g=a.children[f];e=void 0;n=b;var E={};for(e in n)n.hasOwnProperty(e)&&(E[e]=n[e]);l=l(g,c,E);g=!1;q.formattingNodeTypes.indexOf(l.nodeName)>v.notFound?h++:c.ignoreNodeTypes.indexOf(l.nodeName)===v.notFound&&(g=!0,h++);g&&(g={},g[l.nodeName]=l.nodeValues,d[k.children].push(g))}c.includeText&&(c=h,u(a.innerText)&&(0<c&&t(d[k.children])&&0===d[k.children].length?
d[k.text]=a.innerHTML:a.innerText.trim()===a.innerHTML.trim()&&(d[k.text]=a.innerText)));t(d[k.children])&&0===d[k.children].length&&delete d[k.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:d}}function J(a,c){var b={css:{},templateDataKeys:[],templateDataKeysLength:0,templateDataKeysProcessed:[]};if(x(a)&&u(c.json)){var d=K(c.json);c.clearCssFromHead&&L();if(x(c.templateData)){for(var m in c.templateData)c.templateData.hasOwnProperty(m)&&b.templateDataKeys.push(m);b.templateDataKeys=
b.templateDataKeys.sort(function(f,l){return l.length-f.length});b.templateDataKeysLength=b.templateDataKeys.length}if(d.parsed&&x(d.result))for(var h in d.result)if(h===a.nodeName.toLowerCase()){if(c.removeAttributes)for(;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);c.clearHTML&&(a.innerHTML=p.empty);F(a,d.result[h],c,b)}c.addCssToHead&&M(b);c.logTemplateDataWarnings&&N(b)}return O}function F(a,c,b,d){var m=[];for(e in c)if(G(e,k.attribute)){var h=e.replace(k.attribute,p.empty);
a.setAttribute(h,c[e])}else if(G(e,k.cssStyle))h=e.replace(k.cssStyle,p.empty),b.addCssToHead?m.push(h+":"+c[e]+";"):a.style[h]=c[e];else if(e===k.text){if(a.innerHTML=c[e],0<d.templateDataKeysLength)for(h=0;h<d.templateDataKeysLength;h++){var f=d.templateDataKeys[h];b.templateData.hasOwnProperty(f)&&a.innerHTML.indexOf(f)>v.notFound&&(a.innerHTML=a.innerHTML.replace(new RegExp(f,"g"),b.templateData[f]),d.templateDataKeysProcessed.indexOf(f)===v.notFound&&d.templateDataKeysProcessed.push(f))}}else if(e===
k.children)for(h=c[e].length,f=0;f<h;f++){var l=c[e][f],g;for(g in l)if(l.hasOwnProperty(g)){var n=H(a,g.toLowerCase());F(n,l[g],b,d)}}if(0<m.length){if(u(a.className))c=a.className.split(p.space),c=a.nodeName.toLowerCase()+"."+c[0]+" {";else{if(!u(a.id)){c=[];for(b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||c.push(p.dash);var e=B.floor(16*B.random()).toString(16);c.push(e)}c=c.join(p.empty);a.id=c}c="#"+a.id+" {"}b=[];b.push(c);b=b.concat(m);b.push("}");d.css[a.id]=b}}function M(a){var c=w.getElementsByTagName("head")[0],
b=[],d;for(d in a.css)a.css.hasOwnProperty(d)&&(b=b.concat(a.css[d]));a=H(c,"style");a.type="text/css";a.appendChild(w.createTextNode(b.join(p.newLine)))}function L(){for(var a=w.getElementsByTagName("style"),c=a.length,b=0;b<c;b++)a[b].parentNode.removeChild(a[b])}function N(a){if(a.templateDataKeysLength>a.templateDataKeysProcessed.length)for(var c=0;c<a.templateDataKeysLength;c++){var b=a.templateDataKeys[c];a.templateDataKeysProcessed.indexOf(b)===v.notFound&&console.warn("Template variable "+
b+" not found.")}}function H(a,c){var b=c.toLowerCase(),d="text"===b;C.hasOwnProperty(b)||(C[b]=d?w.createTextNode(p.empty):w.createElement(b));b=C[b].cloneNode(!1);a.appendChild(b);return b}function t(a){return null!==a&&void 0!==a&&a!==p.empty}function x(a){return t(a)&&"object"===typeof a}function u(a){return t(a)&&"string"===typeof a}function P(a){return t(a)&&"function"===typeof a}function G(a,c){return a.substring(0,c.length).toLowerCase()===c.toLowerCase()}function r(a,c){return t(a)&&"boolean"===
typeof a?a:c}function z(a,c){if(u(a))a=a.split(p.space),0===a.length&&(a=c);else{var b=a;a=x(b)&&b instanceof Array?b:c}return a}function K(a){var c=!0,b=null;try{u(a)&&(b=A.parse(a))}catch(d){try{b=eval("("+a+")"),P(b)&&(b=b())}catch(m){q.safeMode||(console.error("Errors in object: "+d.message+", "+m.message),c=!1),b=null}}return{parsed:c,result:b}}function I(a){q=x(a)?a:{};q.safeMode=r(q.safeMode,!0);q.formattingNodeTypes=z(q.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "))}
var O=this,w=null,y=null,A=null,B=null,q={},C={},p={empty:"",space:" ",newLine:"\n"},k={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},v={notFound:-1};this.json=function(){var a=null;(function(){a=this;var c={includeAttributes:!0,includeCssProperties:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0,indentSpaces:2,ignoreNodeTypes:[],ignoreCssProperties:[],ignoreAttributes:[]};a.includeAttributes=function(b){c.includeAttributes=r(b,c.includeAttributes);return this};a.includeCssProperties=
function(b){c.includeCssProperties=r(b,c.includeCssProperties);return this};a.includeText=function(b){c.includeText=r(b,c.includeText);return this};a.includeChildren=function(b){c.includeChildren=r(b,c.includeChildren);return this};a.friendlyFormat=function(b){c.friendlyFormat=r(b,c.friendlyFormat);return this};a.indentSpaces=function(b){var d=c.indentSpaces;var m=t(b)&&"number"===typeof b;c.indentSpaces=m?b:d;return this};a.ignoreNodeTypes=function(b){c.ignoreNodeTypes=z(b,c.ignoreNodeTypes);return this};
a.ignoreCssProperties=function(b){c.ignoreCssProperties=z(b,c.ignoreCssProperties);return this};a.ignoreAttributes=function(b){c.ignoreAttributes=z(b,c.ignoreAttributes);return this};a.get=function(b){var d=p.empty;x(b)&&(d={},b=D(b,c,{}),d[b.nodeName]=b.nodeValues,d=c.friendlyFormat?A.stringify(d,null,c.indentSpaces):A.stringify(d));return d}})();return a};this.html=function(){var a=null;(function(){a=this;var c={json:p.empty,templateData:{},removeAttributes:!0,clearHTML:!0,addCssToHead:!1,clearCssFromHead:!1,
logTemplateDataWarnings:!1};a.json=function(b){var d=c.json;b=u(b)?b:d;c.json=b;return this};a.templateData=function(b){var d=c.templateData;b=x(b)?b:d;c.templateData=b;return this};a.removeAttributes=function(b){c.removeAttributes=r(b,c.removeAttributes);return this};a.clearHTML=function(b){c.clearHTML=r(b,c.clearHTML);return this};a.addCssToHead=function(b){c.addCssToHead=r(b,c.addCssToHead);return this};a.clearCssFromHead=function(b){c.clearCssFromHead=r(b,c.clearCssFromHead);return this};a.logTemplateDataWarnings=
function(b){c.logTemplateDataWarnings=r(b,c.logTemplateDataWarnings);return this};a.write=function(b){return J(b,c)}})();return a};this.setConfiguration=function(a){var c=!1,b;for(b in a)a.hasOwnProperty(b)&&q.hasOwnProperty(b)&&a[b]!==q[b]&&(q[b]=a[b],c=!0);c&&I(q);return this};this.getVersion=function(){return"0.6.0"};(function(a,c,b,d){w=a;y=c;A=b;B=d;I();t(y.$jhson)||(y.$jhson=this)})(document,window,JSON,Math)})();