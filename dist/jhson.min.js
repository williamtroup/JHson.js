/*! JHson.js v1.2.0 | (c) Bunoon 2024 | MIT License */
(function(){function J(){for(var a=h.domElementTypes,b=a.length,d=0;d<b;d++){var e=x.getElementsByTagName(a[d]);e=[].slice.call(e);for(var p=e.length,m=0;m<p;m++){var g=e[m],k=!0;if(u(g)&&g.hasAttribute("data-jhson-js")){var c=g.getAttribute("data-jhson-js");if(v(c))if(c=K(c),c.parsed&&w(c.result)){c=F(c.result,{});var f=G();c.json=z(c.json,f.json);c.templateData=F(c.templateData,f.templateData);c.removeOriginalAttributes=l(c.removeOriginalAttributes,f.removeOriginalAttributes);c.clearOriginalHTML=
l(c.clearOriginalHTML,f.clearOriginalHTML);c.addCssToHead=l(c.addCssToHead,f.addCssToHead);c.clearCssFromHead=l(c.clearCssFromHead,f.clearCssFromHead);c.logTemplateDataWarnings=l(c.logTemplateDataWarnings,f.logTemplateDataWarnings);c.addAttributes=l(c.addAttributes,f.addAttributes);c.addCssProperties=l(c.addCssProperties,f.addCssProperties);c.addText=l(c.addText,f.addText);c.addChildren=l(c.addChildren,f.addChildren);f=c.onBeforeRender;f=C(f)?f:null;c.onBeforeRender=f;f=c.onRenderComplete;f=C(f)?
f:null;c.onRenderComplete=f;c.currentView={};c.currentView.element=g;g=c;L(g.onBeforeRender,g.element);c=G();c.json=g.json;M(g.currentView.element,c);L(g.onRenderComplete,g.element)}else h.safeMode||(console.error(h.attributeNotValidErrorText.replace("{{attribute_name}}","data-jhson-js")),k=!1);else h.safeMode||(console.error(h.attributeNotSetErrorText.replace("{{attribute_name}}","data-jhson-js")),k=!1)}if(!k)break}}}function N(a,b,d){var e={},p=a.children.length,m=0;if(b.includeAttributes){var g=
a.attributes.length,k=[];b.includeText&&"textarea"===a.nodeName.toLowerCase()&&u(a.value)&&(e[n.text]=a.value);for(var c=0;c<g;c++){var f=a.attributes[c];v(f.nodeName)&&b.ignoreAttributes.indexOf(f.nodeName)===r.notFound&&(e[n.attribute+f.nodeName]=f.nodeValue,k.push(f.nodeName))}b.generateUniqueMissingIds&&k.indexOf("id")===r.notFound&&b.ignoreAttributes.indexOf("id")===r.notFound&&(e[n.attribute+"id"]=O())}if(b.includeCssProperties&&D.getComputedStyle)for(g=x.defaultView.getComputedStyle(a),k=g.length,
c=0;c<k;c++){var q=g[c];b.ignoreCssProperties.indexOf(q)===r.notFound&&(f=n.cssStyle+q,q=g.getPropertyValue(q),d.hasOwnProperty(f)&&d[f]===q||(e[f]=q,d[f]=e[f]))}if(b.includeChildren&&0<p)for(m=0,e[n.children]=[],g=0;g<p;g++){k=N;c=a.children[g];f=void 0;q=d;var A={};for(f in q)q.hasOwnProperty(f)&&(A[f]=q[f]);k=k(c,b,A);c=!1;h.formattingNodeTypes.indexOf(k.nodeName)>r.notFound?m++:b.ignoreNodeTypes.indexOf(k.nodeName)===r.notFound&&(c=!0,m++);c&&(c={},c[k.nodeName]=k.nodeValues,e[n.children].push(c))}b.includeText&&
(b=m,v(a.innerText)&&(0<b&&u(e[n.children])&&0===e[n.children].length?e[n.text]=a.innerHTML:a.innerText.trim()===a.innerHTML.trim()&&(e[n.text]=a.innerText)));u(e[n.children])&&0===e[n.children].length&&delete e[n.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:e}}function G(){return{json:t.empty,templateData:{},removeOriginalAttributes:!0,clearOriginalHTML:!0,addCssToHead:!1,clearCssFromHead:!1,logTemplateDataWarnings:!1,addAttributes:!0,addCssProperties:!0,addText:!0,addChildren:!0}}
function M(a,b){if(w(a)&&v(b.json)){var d=K(b.json),e={css:{},templateDataKeys:[],templateDataKeysLength:0,templateDataKeysProcessed:[]};if(b.clearCssFromHead)for(var p=[].slice.call(x.getElementsByTagName("styles")),m=p.length,g=0;g<m;g++)p[g].parentNode.removeChild(p[g]);w(b.templateData)&&U(b,e);if(d.parsed&&w(d.result))for(var k in d.result)if(k===a.nodeName.toLowerCase()){if(b.removeOriginalAttributes)for(;0<a.attributes.length;)a.removeAttribute(a.attributes[0].name);b.clearOriginalHTML&&(a.innerHTML=
t.empty);P(a,d.result[k],b,e)}if(b.addCssToHead){d=x.getElementsByTagName("head")[0];a=[];for(var c in e.css)e.css.hasOwnProperty(c)&&(a=a.concat(e.css[c]));c=Q(d,"style");c.type="text/css";c.appendChild(x.createTextNode(a.join(t.newLine)))}if(b.logTemplateDataWarnings&&e.templateDataKeysLength>e.templateDataKeysProcessed.length)for(b=0;b<e.templateDataKeysLength;b++)c=e.templateDataKeys[b],e.templateDataKeysProcessed.indexOf(c)===r.notFound&&console.warn(h.variableWarningText.replace("{{variable_name}}",
c))}return y}function U(a,b){for(var d in a.templateData)a.templateData.hasOwnProperty(d)&&b.templateDataKeys.push(d);b.templateDataKeys=b.templateDataKeys.sort(function(e,p){return p.length-e.length});b.templateDataKeysLength=b.templateDataKeys.length}function P(a,b,d,e){var p=[],m;for(m in b)if(R(m,n.attribute)){if(d.addAttributes){var g=m.replace(n.attribute,t.empty);a.setAttribute(g,b[m])}}else if(R(m,n.cssStyle))d.addCssProperties&&(g=m.replace(n.cssStyle,t.empty),d.addCssToHead?p.push(g+":"+
b[m]+";"):a.style[g]=b[m]);else if(m===n.text){if(d.addText){g=a;var k=d,c=e;g.innerHTML=b[m];if(0<c.templateDataKeysLength)for(var f=0;f<c.templateDataKeysLength;f++){var q=c.templateDataKeys[f];k.templateData.hasOwnProperty(q)&&g.innerHTML.indexOf(q)>r.notFound&&(g.innerHTML=g.innerHTML.replace(new RegExp(q,"g"),k.templateData[q]),c.templateDataKeysProcessed.indexOf(q)===r.notFound&&c.templateDataKeysProcessed.push(q))}}}else if(m===n.children&&d.addChildren)for(g=b[m].length,k=0;k<g;k++){c=b[m][k];
for(var A in c)c.hasOwnProperty(A)&&(f=Q(a,A.toLowerCase()),P(f,c[A],d,e))}0<p.length&&(v(a.className)?(b=a.className.split(t.space),b=a.nodeName.toLowerCase()+"."+b[0]+" {"):(v(a.id)||(a.id=O()),b="#"+a.id+" {"),d=[],d.push(b),d=d.concat(p),d.push("}"),e.css[a.id]=d)}function S(a){var b=[];if(v(a))for(var d=0,e=0;d>r.notFound;)if(d=a.indexOf("{{",e),d>r.notFound&&(e=a.indexOf("}}",d),e>r.notFound)){var p=a.substring(d,e+2);b.push(p);e+=2}return b}function L(a){C(a)&&a.apply(null,[].slice.call(arguments,
1))}function Q(a,b){b=b.toLowerCase();var d="text"===b;H.hasOwnProperty(b)||(H[b]=d?x.createTextNode(t.empty):x.createElement(b));b=H[b].cloneNode(!1);a.appendChild(b);return b}function u(a){return null!==a&&void 0!==a&&a!==t.empty}function w(a){return u(a)&&"object"===typeof a}function v(a){return u(a)&&"string"===typeof a}function C(a){return u(a)&&"function"===typeof a}function O(){for(var a=[],b=0;32>b;b++){8!==b&&12!==b&&16!==b&&20!==b||a.push(t.dash);var d=I.floor(16*I.random()).toString(16);
a.push(d)}return a.join(t.empty)}function R(a,b){return a.substring(0,b.length).toLowerCase()===b.toLowerCase()}function l(a,b){return u(a)&&"boolean"===typeof a?a:b}function z(a,b){return v(a)?a:b}function F(a,b){return w(a)?a:b}function B(a,b){v(a)?(a=a.split(t.space),0===a.length&&(a=b)):a=w(a)&&a instanceof Array?a:b;return a}function K(a){var b=!0,d=null;try{v(a)&&(d=E.parse(a))}catch(e){try{d=eval("("+a+")"),C(d)&&(d=d())}catch(p){h.safeMode||(console.error(h.objectErrorText.replace("{{error_1}}",
e.message).replace("{{error_2}}",p.message)),b=!1),d=null}}return{parsed:b,result:d}}function T(a){h=w(a)?a:{};h.safeMode=l(h.safeMode,!0);h.domElementTypes=B(h.domElementTypes,["*"]);h.formattingNodeTypes=B(h.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "));h.variableWarningText=z(h.variableWarningText,"Template variable {{variable_name}} not found.");h.objectErrorText=z(h.objectErrorText,"Errors in object: {{error_1}}, {{error_2}}");h.attributeNotValidErrorText=z(h.attributeNotValidErrorText,
"The attribute '{{attribute_name}}' is not a valid object.");h.attributeNotSetErrorText=z(h.attributeNotSetErrorText,"The attribute '{{attribute_name}}' has not been set correctly.")}var x=null,D=null,E=null,I=null,y={},h={},H={},t={empty:"",space:" ",newLine:"\n"},n={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},r={notFound:-1};y.renderAll=function(){J();return y};y.json=function(){var a={includeAttributes:!0,includeCssProperties:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0,
indentSpaces:2,ignoreNodeTypes:[],ignoreCssProperties:[],ignoreAttributes:[],generateUniqueMissingIds:!1};return{includeAttributes:function(b){a.includeAttributes=l(b,a.includeAttributes);return this},includeCssProperties:function(b){a.includeCssProperties=l(b,a.includeCssProperties);return this},includeText:function(b){a.includeText=l(b,a.includeText);return this},includeChildren:function(b){a.includeChildren=l(b,a.includeChildren);return this},friendlyFormat:function(b){a.friendlyFormat=l(b,a.friendlyFormat);
return this},indentSpaces:function(b){var d=a.indentSpaces;var e=u(b)&&"number"===typeof b;a.indentSpaces=e?b:d;return this},ignoreNodeTypes:function(b){a.ignoreNodeTypes=B(b,a.ignoreNodeTypes);return this},ignoreCssProperties:function(b){a.ignoreCssProperties=B(b,a.ignoreCssProperties);return this},ignoreAttributes:function(b){a.ignoreAttributes=B(b,a.ignoreAttributes);return this},generateUniqueMissingIds:function(b){a.generateUniqueMissingIds=l(b,a.generateUniqueMissingIds);return this},get:function(b){var d=
t.empty;w(b)&&(d={},b=N(b,a,{}),d[b.nodeName]=b.nodeValues,d=a.friendlyFormat?E.stringify(d,null,a.indentSpaces):E.stringify(d));return d},getVariables:function(b){return S(b)}}};y.html=function(){var a=G();return{json:function(b){a.json=z(b,a.json);return this},templateData:function(b){a.templateData=F(b,a.templateData);return this},removeOriginalAttributes:function(b){a.removeOriginalAttributes=l(b,a.removeOriginalAttributes);return this},clearOriginalHTML:function(b){a.clearOriginalHTML=l(b,a.clearOriginalHTML);
return this},addCssToHead:function(b){a.addCssToHead=l(b,a.addCssToHead);return this},clearCssFromHead:function(b){a.clearCssFromHead=l(b,a.clearCssFromHead);return this},logTemplateDataWarnings:function(b){a.logTemplateDataWarnings=l(b,a.logTemplateDataWarnings);return this},addAttributes:function(b){a.addAttributes=l(b,a.addAttributes);return this},addCssProperties:function(b){a.addCssProperties=l(b,a.addCssProperties);return this},addText:function(b){a.addText=l(b,a.addText);return this},addChildren:function(b){a.addChildren=
l(b,a.addChildren);return this},write:function(b){return M(b,a)},getVariables:function(b){var d=[];w(b)&&(d=S(b.innerHTML));return d}}};y.setConfiguration=function(a){var b=!1;if(w(a)){for(var d in a)a.hasOwnProperty(d)&&h.hasOwnProperty(d)&&a[d]!==h[d]&&(h[d]=a[d],b=!0);b&&T(h)}return y};y.getVersion=function(){return"1.2.0"};(function(a,b,d,e){x=a;D=b;E=d;I=e;T();x.addEventListener("DOMContentLoaded",function(){J()});u(D.$jhson)||(D.$jhson=y)})(document,window,JSON,Math)})();