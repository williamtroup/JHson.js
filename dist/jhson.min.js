/*! JHson.js v0.5.0 | (c) Bunoon 2024 | MIT License */
(function(){function E(a,c,b){var d={},m=a.children.length,p=0;if(c.includeAttributes){var e=a.attributes.length;"textarea"===a.nodeName.toLowerCase()&&t(a.value)&&(d[h.text]=a.value);for(var f=0;f<e;f++){var g=a.attributes[f];u(g.nodeName)&&(d[h.attribute+g.nodeName]=g.nodeValue)}}if(c.includeCssStyles&&x.getComputedStyle)for(e=v.defaultView.getComputedStyle(a),f=e.length,g=0;g<f;g++){var n=e[g];if(k.cssPropertiesToIgnore.indexOf(n)===A.notFound){var l=h.cssStyle+n;n=e.getPropertyValue(n);b.hasOwnProperty(l)&&
b[l]===n||(d[l]=n,b[l]=d[l])}}if(c.includeChildren&&0<m)for(p=0,d[h.children]=[],e=0;e<m;e++){f=E;g=a.children[e];l=void 0;n=b;var y={};for(l in n)n.hasOwnProperty(l)&&(y[l]=n[l]);f=f(g,c,y);g=!1;k.formattingNodeTypes.indexOf(f.nodeName.toLowerCase())>A.notFound?p++:k.nodeTypesToIgnore.indexOf(f.nodeName.toLowerCase())===A.notFound&&(g=!0,p++);g&&(g={},g[f.nodeName]=f.nodeValues,d[h.children].push(g))}c.includeText&&(c=p,u(a.innerText)&&(0<c&&t(d[h.children])&&0===d[h.children].length?d[h.text]=a.innerHTML:
a.innerText===a.innerHTML&&(d[h.text]=a.innerText)));t(d[h.children])&&0===d[h.children].length&&delete d[h.children];return{nodeName:a.nodeName.toLowerCase(),nodeValues:d}}function J(a,c){if(w(a)&&u(c.json)){var b=K(c.json),d=[];c.clearCssFromHead&&L();if(w(c.templateData)){for(var m in c.templateData)c.templateData.hasOwnProperty(m)&&d.push(m);d=d.sort(function(e,f){return f.length-e.length})}if(b.parsed&&w(b.result))for(var p in b.result)if(p===a.nodeName.toLowerCase()){if(c.removeAttributes)for(;0<
a.attributes.length;)a.removeAttribute(a.attributes[0].name);c.clearHTML&&(a.innerHTML=q.empty);F(a,b.result[p],d,c)}}return M}function F(a,c,b,d){var m=b.length,p=[],e;for(e in c)if(G(e,h.attribute)){var f=e.replace(h.attribute,q.empty);a.setAttribute(f,c[e])}else if(G(e,h.cssStyle))f=e.replace(h.cssStyle,q.empty),d.addCssToHead?p.push(f+":"+c[e]+";"):a.style[f]=c[e];else if(e===h.text){if(a.innerHTML=c[e],0<m)for(f=0;f<m;f++){var g=b[f];d.templateData.hasOwnProperty(g)&&(a.innerHTML=a.innerHTML.replace(new RegExp(g,
"g"),d.templateData[g]))}}else if(e===h.children)for(f=c[e].length,g=0;g<f;g++){var n=c[e][g],l;for(l in n)if(n.hasOwnProperty(l)){var y=H(a,l.toLowerCase());F(y,n[l],b,d)}}if(0<p.length){c=v.getElementsByTagName("head")[0];if(!u(a.id)){b=[];for(d=0;32>d;d++)8!==d&&12!==d&&16!==d&&20!==d||b.push(q.dash),m=B.floor(16*B.random()).toString(16),b.push(m);b=b.join(q.empty);a.id=b}b=[];b.push("#"+a.id+" {");b=b.concat(p);b.push("}");a=H(c,"style");a.type="text/css";a.appendChild(v.createTextNode(b.join(q.newLine)))}}
function L(){for(var a=v.getElementsByTagName("style"),c=a.length,b=0;b<c;b++)a[b].parentNode.removeChild(a[b])}function H(a,c){var b=c.toLowerCase(),d="text"===b;C.hasOwnProperty(b)||(C[b]=d?v.createTextNode(q.empty):v.createElement(b));b=C[b].cloneNode(!1);a.appendChild(b);return b}function t(a){return null!==a&&void 0!==a&&a!==q.empty}function w(a){return t(a)&&"object"===typeof a}function u(a){return t(a)&&"string"===typeof a}function N(a){return t(a)&&"function"===typeof a}function G(a,c){return a.substring(0,
c.length).toLowerCase()===c.toLowerCase()}function r(a,c){return t(a)&&"boolean"===typeof a?a:c}function D(a,c){if(u(a))a=a.split(q.space),0===a.length&&(a=c);else{var b=a;a=w(b)&&b instanceof Array?b:c}return a}function K(a){var c=!0,b=null;try{u(a)&&(b=z.parse(a))}catch(d){try{b=eval("("+a+")"),N(b)&&(b=b())}catch(m){k.safeMode||(console.error("Errors in object: "+d.message+", "+m.message),c=!1),b=null}}return{parsed:c,result:b}}function I(a){k=w(a)?a:{};k.safeMode=r(k.safeMode,!0);k.nodeTypesToIgnore=
D(k.nodeTypesToIgnore,[]);k.cssPropertiesToIgnore=D(k.cssPropertiesToIgnore,[]);k.formattingNodeTypes=D(k.formattingNodeTypes,"b strong i em mark small del ins sub sup".split(" "))}var M=this,v=null,x=null,z=null,B=null,k={},C={},q={empty:"",space:" ",newLine:"\n"},h={text:"#text",cssStyle:"$",attribute:"@",children:"&children"},A={notFound:-1};this.json=function(){var a=null;(function(){a=this;var c={includeAttributes:!0,includeCssStyles:!1,includeText:!0,includeChildren:!0,friendlyFormat:!0,indentSpaces:2};
a.includeAttributes=function(b){c.includeAttributes=r(b,c.includeAttributes);return this};a.includeCssStyles=function(b){c.includeCssStyles=r(b,c.includeCssStyles);return this};a.includeText=function(b){c.includeText=r(b,c.includeText);return this};a.includeChildren=function(b){c.includeChildren=r(b,c.includeChildren);return this};a.friendlyFormat=function(b){c.friendlyFormat=r(b,c.friendlyFormat);return this};a.indentSpaces=function(b){var d=c.indentSpaces;var m=t(b)&&"number"===typeof b;c.indentSpaces=
m?b:d;return this};a.get=function(b){var d=q.empty;w(b)&&(d={},b=E(b,c,{}),d[b.nodeName]=b.nodeValues,d=c.friendlyFormat?z.stringify(d,null,c.indentSpaces):z.stringify(d));return d}})();return a};this.html=function(){var a=null;(function(){a=this;var c={json:q.empty,templateData:{},removeAttributes:!0,clearHTML:!0,addCssToHead:!1,clearCssFromHead:!1};a.json=function(b){var d=c.json;b=u(b)?b:d;c.json=b;return this};a.templateData=function(b){var d=c.templateData;b=w(b)?b:d;c.templateData=b;return this};
a.removeAttributes=function(b){c.removeAttributes=r(b,c.removeAttributes);return this};a.clearHTML=function(b){c.clearHTML=r(b,c.clearHTML);return this};a.addCssToHead=function(b){c.addCssToHead=r(b,c.addCssToHead);return this};a.clearCssFromHead=function(b){c.clearCssFromHead=r(b,c.clearCssFromHead);return this};a.write=function(b){return J(b,c)}})();return a};this.setConfiguration=function(a){var c=!1,b;for(b in a)a.hasOwnProperty(b)&&k.hasOwnProperty(b)&&a[b]!==k[b]&&(k[b]=a[b],c=!0);c&&I(k);return this};
this.getVersion=function(){return"0.5.0"};(function(a,c,b,d){v=a;x=c;z=b;B=d;I();t(x.$jhson)||(x.$jhson=this)})(document,window,JSON,Math)})();